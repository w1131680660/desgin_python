webpackJsonp([100],{"05kH":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Gu7T"),r=e.n(i),s={data:function(){return{showPie:!0,warehouse_data_list:[],date_list:[],curIndex:0,curSpanIdx:0,daterange:7,options:[7,15,30],todayList:[],todayOrders:[],orderHead:["仓库名称","获得追踪号的平均时间","超时订单数量","超时订单百分比","平均处理时间","平均出库时间","平均取货时间"],orderBody:[],firstRequest:!0,todayhead:[],tracing_avg:[],t_a_unit:"",timeout_num:[],timeout_ratio:[],deal_avg:[],deal_a_unit:"",delivery_avg:[],delivery_a_unit:"",pickup_avg:[],p_u_a_unit:"",list:[],selectVal:"全部",selectCountry:[],pieData:{legendData:[],seriesData:[]},barData:{xAxisData:[],min:0,max:"",series:[]},barSeriesData:[]}},computed:{barLegendData:function(){return["追踪号平均时间(单位:"+this.t_a_unit+")","超时订单数量","超时订单百分比(单位:%)","平均处理时间(单位:"+this.deal_a_unit+")","平均出库时间(单位:"+this.delivery_a_unit+")","平均取货时间(单位:"+this.p_u_a_unit+")"]}},methods:{changeBarData:function(t){console.log(t),this.curSpanIdx=t;var a=void 0;switch(t){case 0:this.barData.series[0]={name:"追踪号平均时间(单位:"+this.t_a_unit+")",type:"bar",stack:"追踪号平均时间(单位:"+this.t_a_unit+")",data:this.tracing_avg,label:{normal:{show:!0,position:"top"},formatter:"{@value}"}},a=Math.max.apply(null,this.tracing_avg),this.barData.max=this.ceilNumber(a);break;case 1:this.barData.series[0]={name:"超时订单数量",type:"bar",stack:"超时订单数量",data:this.timeout_num,label:{normal:{show:!0,position:"top"},formatter:"{@value}"}},a=Math.max.apply(null,this.timeout_num),this.barData.max=this.ceilNumber(a);break;case 2:this.barData.series[0]={name:"超时订单百分比(单位:%)",type:"bar",stack:"超时订单百分比(单位:%)",data:this.timeout_ratio,label:{normal:{show:!0,position:"top"},formatter:"{@value}"}},a=Math.max.apply(null,this.timeout_ratio),this.barData.max=this.ceilNumber(a);break;case 3:this.barData.series[0]={name:"平均处理时间(单位:"+this.deal_a_unit+")",type:"bar",stack:"平均处理时间(单位:"+this.deal_a_unit+")",data:this.deal_avg,label:{normal:{show:!0,position:"top"},formatter:"{@value}"}},a=Math.max.apply(null,this.deal_avg),this.barData.max=this.ceilNumber(a);break;case 4:this.barData.series[0]={name:"平均出库时间(单位:"+this.delivery_a_unit+")",type:"bar",stack:"平均出库时间(单位:"+this.delivery_a_unit+")",data:this.delivery_avg,label:{normal:{show:!0,position:"top"},formatter:"{@value}"}},a=Math.max.apply(null,this.delivery_avg),this.barData.max=this.ceilNumber(a);break;case 5:this.barData.series[0]={name:"平均取货时间(单位:"+this.p_u_a_unit+")",type:"bar",stack:"平均取货时间(单位:"+this.p_u_a_unit+")",data:this.pickup_avg,label:{normal:{show:!0,position:"top"},formatter:"{@value}"}},a=Math.max.apply(null,this.pickup_avg),this.barData.max=this.ceilNumber(a)}this.getEchartData2()},changeDate:function(){var t=this,a={};a.days=this.daterange,"全部"!==this.selectVal&&(a.country=this.selectVal),this.$axios.get(this._url2+"server/order_management/get_warehouse_data/",{params:a}).then(function(a){t.curSpanIdx=0,t.barData.xAxisData=[],t.tracing_avg=[],t.timeout_num=[],t.timeout_ratio=[],t.deal_avg=[],t.delivery_avg=[],t.pickup_avg=[],t.orderBody=a.data.warehouse_days_data,t.orderBody.forEach(function(a){t.barData.xAxisData.push(a.warehouse_name),t.tracing_avg.push(t.getNum(a.tracking_no_avg_minute).num),t.timeout_num.push(a.timeout_num),t.timeout_ratio.push(t.getNum(a.timeout_order_ratio).num),t.deal_avg.push(t.getNum(a.deal_avg_date).num),t.delivery_avg.push(t.getNum(a.delivery_avg_date).num),t.pickup_avg.push(t.getNum(a.pick_up_avg_date).num)}),t.t_a_unit=t.getNum(t.orderBody[0].tracking_no_avg_minute).unit,t.deal_a_unit=t.getNum(t.orderBody[0].deal_avg_date).unit,t.delivery_a_unit=t.getNum(t.orderBody[0].delivery_avg_date).unit,t.p_u_a_unit=t.getNum(t.orderBody[0].pick_up_avg_date).unit;var e=Math.max.apply(null,t.tracing_avg);t.barData.max=t.ceilNumber(e),t.barData.series[0]={name:"追踪号平均时间(单位:"+t.t_a_unit+")",type:"bar",stack:"追踪号平均时间(单位:"+t.t_a_unit+")",data:t.tracing_avg,label:{normal:{show:!0,position:"top"},formatter:"{@value}"}},t.getEchartData2()})},changeCountry:function(t){this.daterange=7,this.curIndex=t,this.curSpanIdx=0,this.selectVal=this.list[t],this.getData(this.selectVal)},getEchartData1:function(){var t=this,a=this.$refs.pieTable,e={title:{text:"仓库订单占比",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,itemWidth:10,itemHeight:10,data:this.pieData.legendData},series:[{name:this.pieData.legendData,type:"pie",radius:"55%",center:["40%","50%"],data:this.pieData.seriesData,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a&&(this.pietable=this.$echarts.init(a),this.pietable.setOption(e,!0),window.addEventListener("resize",function(){t.pietable.resize()})),this.$on("hook:destoryed",function(){t.pietable.resize()})},getEchartData2:function(){var t=this,a=this.$refs.barTable,e={title:{text:"订单信息"},tooltip:{trigger:"axis"},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",data:this.barData.xAxisData,axisLabel:{interval:0,rotate:40}},yAxis:{type:"value",min:this.barData.min,max:this.barData.max},series:this.barData.series};a&&(this.barTable=this.$echarts.init(a),this.barTable.setOption(e,!0),window.addEventListener("resize",function(){t.pietable.resize()})),this.$on("hook:destoryed",function(){t.pietable.resize()})},getData:function(t){var a=this;this.pieData.legendData=[],this.pieData.seriesData=[],this.barData.xAxisData=[],this.barData.max="",this.barData.series=[],this.getEchartData1(),this.getEchartData2(),this.tracing_avg=[],this.timeout_num=[],this.timeout_ratio=[],this.deal_avg=[],this.delivery_avg=[],this.pickup_avg=[];var e="server/order_management/order_statistics/";t&&"全部"!==t&&(e="server/order_management/order_statistics/?country="+t),this.$axios.get(this._url2+e).then(function(t){if(a.firstRequest&&(a.list=["全部"].concat(r()(t.data.country_data)),a.firstRequest=!1,a.todayOrders=t.data.today_order,a.todayOrders.forEach(function(t){a.todayhead.push(t.country),a.todayList.push(t.num)})),a.warehouse_data_list=t.data.warehouse_data_list,t.data.warehouse_name_list.length&&t.data.warehouse_seven_data.length?a.showPie=!0:a.showPie=!1,a.pieData.legendData=t.data.warehouse_name_list,a.CurCountryHead=[],a.CurCountryBody=[],a.warehouse_data_list.forEach(function(t){if("订单总数"!==t.warehouse_name){var e={};e.name=t.warehouse_name,e.value=t.num,a.pieData.seriesData.push(e),a.getEchartData1()}a.CurCountryHead.push(t.warehouse_name),a.CurCountryBody.push(t.num)}),a.orderBody=t.data.warehouse_seven_data||[],a.orderBody.forEach(function(t){a.barData.xAxisData.push(t.warehouse_name),a.tracing_avg.push(a.getNum(t.tracking_no_avg_minute).num),a.timeout_num.push(t.timeout_num),a.timeout_ratio.push(a.getNum(t.timeout_order_ratio).num),a.deal_avg.push(a.getNum(t.deal_avg_date).num),a.delivery_avg.push(a.getNum(t.delivery_avg_date).num),a.pickup_avg.push(a.getNum(t.pick_up_avg_date).num)}),a.orderBody.length){a.t_a_unit=a.getNum(a.orderBody[0].tracking_no_avg_minute).unit,a.deal_a_unit=a.getNum(a.orderBody[0].deal_avg_date).unit,a.delivery_a_unit=a.getNum(a.orderBody[0].delivery_avg_date).unit,a.p_u_a_unit=a.getNum(a.orderBody[0].pick_up_avg_date).unit;var e=Math.max.apply(null,a.tracing_avg);a.barData.max=a.ceilNumber(e),a.barData.series[0]={name:"追踪号平均时间(单位:"+a.t_a_unit+")",type:"bar",stack:"追踪号平均时间(单位:"+a.t_a_unit+")",data:a.tracing_avg,label:{normal:{show:!0,position:"top"},formatter:"{@value}"}}}a.getEchartData2()})},ceilNumber:function(t){var a=0;if(t<10)a=1;else for(;t>=1;)t/=10,a+=1;return Math.ceil(t)*Math.pow(10,a)},getNum:function(t){var a=void 0,e=void 0;return t.indexOf("%")>-1?(console.log(t),a=Number(t.replace(/%$/g,"")).toFixed(2),e="%"):(a=Number(t.replace(/[\u4e00-\u9fa5]+$/g,"")),e=t.match(/[\u4e00-\u9fa5]+$/g)),{num:a,unit:e}}},mounted:function(){this.getEchartData1(),this.getEchartData2()},created:function(){this.getData()}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"orderstatics"},[e("div",{staticClass:"leftmenu"},[e("h3",[t._v("海外仓订单统计")]),t._v(" "),e("ul",t._l(t.list,function(a,i){return e("li",{key:i,class:{active:t.curIndex===i},on:{click:function(a){return t.changeCountry(i)}}},[t._v("\n        "+t._s(a)+"\n      ")])}),0)]),t._v(" "),e("div",{staticClass:"rightmenu"},[e("div",{staticClass:"totayOrder"},[e("h2",[t._v("昨日订单量")]),t._v(" "),e("table",[e("thead",[e("tr",t._l(t.todayhead,function(a,i){return e("th",{key:i},[t._v(t._s(a))])}),0)]),t._v(" "),e("tbody",[e("tr",t._l(t.todayList,function(a,i){return e("td",{key:i},[t._v("\n              "+t._s(a)+"\n            ")])}),0)])])]),t._v(" "),"全部"!==t.selectVal?e("div",{staticClass:"selectOrder"},[e("div",[e("h2",[t._v(t._s(t.selectVal)+"昨日订单量")]),t._v(" "),e("table",[e("thead",[e("tr",t._l(t.CurCountryHead,function(a,i){return e("td",{key:i},[t._v(t._s(a))])}),0)]),t._v(" "),e("tbody",[e("tr",t._l(t.CurCountryBody,function(a,i){return e("td",{key:i},[t._v(t._s(a))])}),0)])])])]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPie,expression:"showPie"}],ref:"pieTable",staticClass:"pieTable",staticStyle:{width:"80%",height:"500px"}}),t._v(" "),e("div",[e("div",{staticClass:"selectDate"},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeDate},model:{value:t.daterange,callback:function(a){t.daterange=a},expression:"daterange"}},t._l(t.options,function(t,a){return e("el-option",{key:a,attrs:{label:"近"+t+"天",value:t}})}),1)],1),t._v(" "),e("div",[e("table",{staticClass:"m_c"},[e("thead",[e("tr",t._l(t.orderHead,function(a,i){return e("th",{key:i},[t._v("\n                "+t._s(a)+"\n              ")])}),0)]),t._v(" "),e("tbody",t._l(t.orderBody,function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.warehouse_name))]),t._v(" "),e("td",[t._v(t._s(a.tracking_no_avg_minute))]),t._v(" "),e("td",[t._v(t._s(a.timeout_num))]),t._v(" "),e("td",[t._v(t._s(a.timeout_order_ratio))]),t._v(" "),e("td",[t._v(t._s(a.deal_avg_date))]),t._v(" "),e("td",[t._v(t._s(a.delivery_avg_date))]),t._v(" "),e("td",[t._v(t._s(a.pick_up_avg_date))])])}),0)])])]),t._v(" "),e("div",{staticClass:"barTable"},[e("div",{staticClass:"barlist"},t._l(this.barLegendData,function(a,i){return e("span",{key:i,class:["barspan",{barActive:t.curSpanIdx===i}],on:{click:function(a){return t.changeBarData(i)}}},[t._v(t._s(a))])}),0),t._v(" "),e("div",{ref:"barTable",staticStyle:{width:"80%",height:"500px",margin:"0 auto"}})])])])},staticRenderFns:[]};var u=e("VU/8")(s,n,!1,function(t){e("tk4E")},"data-v-13ba3052",null);a.default=u.exports},tk4E:function(t,a){}});
//# sourceMappingURL=100.467f8678288dabd22f95.js.map