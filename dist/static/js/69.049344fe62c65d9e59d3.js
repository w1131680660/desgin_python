webpackJsonp([69],{MSBS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("BO1k"),r=a.n(l),i=a("mtWM"),n=a.n(i),o={data:function(){return{restaurants:[],editArr:{replySite:!0,replyCountry:!0,replyPlatform:!0,replyLanguage:!0,replyGoodsNo:!0},replyGoodsNo:"",replyOrderNo:"",replySite:"",replyCountry:"",replyLanguage:"",replyBuysText:"",replyTranslateChinese:"",replyTranslateChinese2:"",replyProblemType:"",replyassociatedOperation:"",replywhiteOrBlack:"",replysku:"",replyPlatform:"",replyProductName:"",replyProductCode:"",submitWarehouseCode:"",total:0,page:1,leftNavData:[],firstNav:"",twiceNav:"",threeNav:"",tableData:[],allTextarea:[],productDo:"",partData:[],interpretBtn:!1,replyUploadPeople:"",fileData:[]}},methods:{createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},querySearch:function(e,t){var a=this.restaurants;t(e?a.filter(this.createFilter(e)):a)},uploadFile:function(){},beforeUpload:function(e){this.fileData.push(e)},getDefaultData:function(){var e=this;n()({url:this._url2+"server/customer_management/email_manage",method:"get",params:{page:1,type:"站内"}}).then(function(t){console.log(t),e.tableData=t.data.re_data,e.total=t.data.count[0].count/5,console.log(e.tableData)})},NavClick:function(e,t,a){var l=this;this.firstNav=e,this.twiceNav=t,this.threeNav=a,n()({url:this._url2+"server/customer_management/email_manage",method:"get",params:{page:1,type:"站内",platform:this.firstNav,country:this.twiceNav,site:this.threeNav}}).then(function(e){console.log(e),l.tableData=e.data.re_data,l.$nextTick(function(){$(".BuyerNewsTable>tbody").scrollTop(0)}),l.total=e.data.count[0].count/5,console.log(l.tableData),l.page=1})},fileSubmit:function(e){var t=e.target.file,a=new FormData,l=!0,i=!1,n=void 0;try{for(var o,s=r()(t);!(l=(o=s.next()).done);l=!0){var c=o.value;a.append("",c)}}catch(e){i=!0,n=e}finally{try{!l&&s.return&&s.return()}finally{if(i)throw n}}},damageCheckChange:function(){for(var e=document.querySelectorAll(".damagedCheck"),t=document.querySelectorAll(".damagedDo"),a=0;a<e.length;a++)1==e[a].checked?t[a].removeAttribute("disabled"):t[a].setAttribute("disabled","disabled")},elseCheckbox:function(){var e=this;if(1==document.querySelector(".elseCheckbox").checked){var t=document.querySelector(".elseTexarea").value;if(!t.trim().length)return void console.log(t.trim());console.log("没有输入值"),n()({url:this._url2+"server/customer_management/re_message_translate/",method:"get",params:{content:t}}).then(function(t){console.log(t.data.re_content),t.data.re_content.length>0?e.replyTranslateChinese2=t.data.re_content[0]:e.replyTranslateChinese2="",console.log(t)}),this.replyProblemType="";for(var a=document.querySelectorAll(".allDiv"),l=0;l<a.length;l++)a[l].style.backgroundColor="";console.log("判断有误勾选",t)}},lackCheckChange:function(){for(var e=document.querySelectorAll(".lackCheck"),t=document.querySelectorAll(".lackDo"),a=0;a<e.length;a++)1==e[a].checked?t[a].removeAttribute("disabled"):t[a].setAttribute("disabled","disabled")},getDataById:function(){var e=this;n()({url:this._url2+"server/customer_management/order_num_inquire/",method:"get",params:{order_num:this.replyOrderNo}}).then(function(t){for(var a in e.replySite="",e.replyCountry="",e.replyPlatform="",e.replyLanguage="",e.replyGoodsNo="",console.log(t,88880),e.editArr)e.editArr[a]=!0;if(t.data.data.length>0)for(var l in e.replySite=t.data.data[0].site,t.data.country_dict)console.log(t.data.data[0]),t.data.data[0].country_code==l&&(e.replyCountry=t.data.country_dict[l][0],e.replyLanguage=t.data.country_dict[l][1],e.productDo=t.data.data[0].product_code,e.replyGoodsNo=t.data.data[0].product_name+"        数量:"+t.data.data[0].quantity,e.replysku=t.data.data[0].sku,e.replyPlatform=t.data.data[0].platform,e.replyProductName=t.data.data[0].product_name,e.replyProductCode=t.data.data[0].product_code,e.partData=t.data.commodity_data,e.reflash());e.replySite||(e.editArr.replySite=!1),e.replyCountry||(e.editArr.replyCountry=!1),e.replyPlatform||(e.editArr.replyPlatform=!1),e.replyLanguage||(e.editArr.replyLanguage=!1),e.replyGoodsNo||(e.editArr.replyGoodsNo=!1)})},reflash:function(){this.replyassociatedOperation="",this.replywhiteOrBlack="",this.replyTranslateChinese="",this.replyTranslateChinese2="",this.replyProblemType="",this.replyBuysText="",this.allTextarea=[],document.querySelector(".elseTexarea").value=""},interpret:function(){var e=this;this.interpretBtn=!0;var t=new FormData;t.append("platform",this.replyPlatform),t.append("country",this.replyCountry),t.append("language",this.replyLanguage),t.append("content",this.replyBuysText),t.append("product_code",this.productDo),this.$axios.post(this._url2+"server/customer_management/translate_semantic_analysis/",t).then(function(t){e.replyTranslateChinese=t.data.data,console.log(t,99),e.allTextarea=t.data.tem_data,console.log(e.allTextarea,123),e.interpretBtn=!1;var a=t.data.re_problem_data||[];for(var l in e.restaurants=[],a){var r={},i=a[l];r.value=i.problem_type,e.restaurants.push(r)}})},submitEmail:function(){console.log("问题类型",this.replyProblemType);for(var e=0,t=document.querySelectorAll(".damagedDo"),a=document.querySelectorAll(".damagedCheck"),l=document.querySelectorAll(".damagespan"),r=document.querySelectorAll(".lackCheck"),i=document.querySelectorAll(".lackDo"),n=document.querySelectorAll(".lessspan"),o=[],s=[],c="",p=0;p<a.length;p++)if(1==a[p].checked){var u=[];u.push(l[p].innerHTML),u.push(t[p].value),o.push(u),""==t[p].value&&e++}for(var d=0;d<r.length;d++)if(1==r[d].checked){var h=[];h.push(n[d].innerHTML),h.push(i[d].value),s.push(h),""==i[d].value&&e++}if(console.log(o,s,123),e>=1)alert("请把勾选的缺件破损零件数量填上或者不勾选");else{for(var y=document.querySelectorAll(".allDiv"),v=0;v<y.length;v++)"skyblue"==y[v].style.backgroundColor&&(c=y[v].innerHTML);if(1==document.querySelector(".elseCheckbox").checked&&(c=document.querySelector(".elseTexarea").value),""===c||""==this.replyCountry)alert("订单编号和回复邮件模板不能为空！");else{var m=new FormData;console.log(this.submitWarehouseCode,this.replyProductCode,this.submitWarehouseCode,this.replyOrderNo,this.replyProblemType,this.replyassociatedOperation,this.replywhiteOrBlack,s,o,c,this.replyBuysText,this.replyTranslateChinese2,this.replyTranslateChinese,this.replysku),m.append("warehouse_code",this.submitWarehouseCode),m.append("product_code",this.replyProductCode),m.append("product_name",this.replyGoodsNo),m.append("order_number",this.replyOrderNo),m.append("problem_type",this.replyProblemType),m.append("related_operations",this.replyassociatedOperation),m.append("customer_status",this.replywhiteOrBlack),m.append("lack_part",s),m.append("damaged",o),m.append("email_template",c),m.append("email_content",this.replyBuysText),m.append("translation_template",this.replyTranslateChinese2),m.append("customer_translation",this.replyTranslateChinese),m.append("sku",this.replysku),m.append("type","站内"),m.append("upload_people",this.replyUploadPeople);for(var _=0;_<this.fileData.length;_++)m.append("files",this.fileData[_]),console.log("文件",this.fileData[_]);var f=this.replyPlatform.charAt(0).toUpperCase()+this.replyPlatform.slice(1);m.append("platform",f),m.append("country",this.replyCountry),m.append("site",this.replySite),console.log(m,123123),this.$axios.post(this._url2+"server/customer_management/customer_reply_email/",m).then(function(e){200==e.data.code&&alert("提交成功")})}}},alldiv:function(e){if(0==document.querySelector(".elseCheckbox").checked){for(var t=document.querySelectorAll(".allDiv"),a=0;a<t.length;a++)t[a].style.backgroundColor="";t[e].style.backgroundColor="skyblue",this.replyTranslateChinese2=this.allTextarea[e].email_translation,this.replyProblemType=this.allTextarea[e].problem_type}},showMail:function(){document.querySelector(".bottomBox").style.display="block"},replacement:function(){this.replyBuysText="",this.replyTranslateChinese="",this.replyassociatedOperation="",this.replywhiteOrBlack="",this.replyGoodsNo="",this.replyOrderNo="",this.replySite="",this.replyCountry="",this.replyLanguage="",this.allTextarea=[],this.replyTranslateChinese2="",this.replyPlatform="",document.querySelector(".elseTexarea").value=""},cancel:function(){document.querySelector(".bottomBox").style.display="none"},handleCurrentChange:function(e){var t=this;""==this.firstNav&&(this.firstNav=null),""==this.twiceNav&&(this.twiceNav=null),""==this.threeNav&&(this.threeNav=null),this.page=e,n()({url:this._url2+"server/customer_management/email_manage",method:"get",params:{page:this.page,type:"站内",platform:this.firstNav,country:this.twiceNav,site:this.threeNav}}).then(function(e){console.log(e),t.tableData=e.data.re_data,t.$nextTick(function(){$(".BuyerNewsTable>tbody").scrollTop(0)}),t.total=e.data.count[0].count/5,console.log(t.tableData)}),null==this.firstNav&&(this.firstNav=""),null==this.twiceNav&&(this.twiceNav=""),null==this.threeNav&&(this.threeNav="")}},created:function(){var e=this;this.getDefaultData(),n()({url:this._url2+"server/personnel_management/area_sign2/",method:"get"}).then(function(t){console.log(t,5),e.leftNavData=t.data.data})},watch:{replyTranslateChinese2:function(){document.querySelector(".elseCheckbox").checked}},mounted:function(){window.addEventListener("scroll",this.handleScroll),this.replyUploadPeople=sessionStorage.getItem("user_name")}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"leftNav",attrs:{"unique-opened":""}},e._l(e.leftNavData,function(t,l){return a("el-submenu",{key:l,attrs:{index:l+""}},[a("template",{slot:"title"},[e._v(e._s(l))]),e._v(" "),e._l(t,function(t,r){return a("el-submenu",{key:r,attrs:{index:r+""}},[a("template",{slot:"title"},[e._v(e._s(r))]),e._v(" "),e._l(t,function(t,i){return a("el-menu-item",{key:i,attrs:{index:r+t},on:{click:function(a){return e.NavClick(l,r,t)}}},[e._v(e._s(t))])})],2)})],2)}),1),e._v(" "),a("div",{staticStyle:{"margin-left":"13.5vw"}},[a("h3",{staticStyle:{"padding-top":"2vh",color:"white"}},[e._v("\n      亚马逊客户消息列表（站内邮件）"),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showMail()}}},[e._v("回复买家消息")])],1),e._v(" "),a("table",{staticClass:"BuyerNewsTable"},[e._m(0),e._v(" "),a("tbody",e._l(e.tableData,function(t,l){return a("tr",{key:l},[a("td",[e._v(e._s(l+1+50*(e.page-1)))]),e._v(" "),a("td",[e._v(e._s(t.site))]),e._v(" "),a("td",[e._v(e._s(t.country))]),e._v(" "),a("td",[e._v(e._s(t.order_number))]),e._v(" "),a("td",[e._v(e._s(t.problem_type))]),e._v(" "),a("td",[e._v(e._s(t.processing_time))]),e._v(" "),a("td",[e._v(e._s(t.dispose_person))])])}),0)]),e._v(" "),a("el-pagination",{staticClass:"pagetotle",staticStyle:{margin:"1vh 0 0 35vw"},attrs:{background:"","current-page":e.page,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}),e._v(" "),a("div",{staticClass:"bottomBox"},[e._m(1),e._v(" "),e._m(2),e._v(" "),a("h4",{staticStyle:{margin:"2vh"}},[e._v("回复站内邮件")]),e._v(" "),a("div",{staticStyle:{margin:"2vh 0 2vh 10vh"}},[e._v("\n        订单编号："),a("el-input",{staticStyle:{width:"20vw"},attrs:{placeholder:"请输入订单编号"},model:{value:e.replyOrderNo,callback:function(t){e.replyOrderNo=t},expression:"replyOrderNo"}}),a("el-button",{staticStyle:{"margin-left":"1vw"},attrs:{type:"primary"},on:{click:function(t){return e.getDataById()}}},[e._v("查 看")])],1),e._v(" "),a("div",[a("span",{staticStyle:{margin:"10vh 5vh 10vh 10vh"}},[e._v("站点："),a("el-input",{staticStyle:{width:"10vw"},attrs:{placeholder:"请输入订单编号获取",readonly:e.editArr.replySite},model:{value:e.replySite,callback:function(t){e.replySite=t},expression:"replySite"}})],1),e._v(" "),a("span",{staticStyle:{margin:"5vh"}},[e._v("国家："),a("el-input",{staticStyle:{width:"10vw"},attrs:{placeholder:"请输入订单编号获取",readonly:e.editArr.replyCountry},model:{value:e.replyCountry,callback:function(t){e.replyCountry=t},expression:"replyCountry"}})],1),e._v(" "),a("span",{staticStyle:{margin:"5vh"}},[e._v("平台："),a("el-input",{staticStyle:{width:"10vw"},attrs:{placeholder:"请输入订单编号获取",readonly:e.editArr.replyPlatform},model:{value:e.replyPlatform,callback:function(t){e.replyPlatform=t},expression:"replyPlatform"}})],1),e._v(" "),a("span",{staticStyle:{margin:"5vh"}},[e._v("语言："),a("el-input",{staticStyle:{width:"10vw"},attrs:{placeholder:"请输入订单编号获取",readonly:e.editArr.replyLanguage},model:{value:e.replyLanguage,callback:function(t){e.replyLanguage=t},expression:"replyLanguage"}})],1)]),e._v(" "),a("div",{staticStyle:{margin:"2vh 0 0 10vh"}},[e._v("\n        商品及其数量：\n        "),a("el-input",{staticStyle:{width:"30vw"},attrs:{placeholder:"请输入订单编号获取",readonly:e.editArr.replyGoodsNo},model:{value:e.replyGoodsNo,callback:function(t){e.replyGoodsNo=t},expression:"replyGoodsNo"}})],1),e._v(" "),a("div",{staticStyle:{margin:"2vh 0 0 10vh",display:"flex"}},[a("div",{staticStyle:{flex:"1"}},[e._v("\n          买家消息内容：\n          "),a("el-input",{staticStyle:{width:"20vw"},attrs:{type:"textarea",placeholder:"买家消息内容翻译",maxlength:"9999","show-word-limit":"",rows:15},model:{value:e.replyBuysText,callback:function(t){e.replyBuysText=t},expression:"replyBuysText"}})],1),e._v(" "),a("div",{staticStyle:{flex:"1"}},[a("el-button",{staticStyle:{margin:"17.5vh 0 0 5vw",width:"10vw"},attrs:{type:"primary",disabled:e.interpretBtn},on:{click:e.interpret}},[e._v("匹配并翻译")])],1),e._v(" "),a("div",{staticStyle:{flex:"2"}},[a("el-input",{staticStyle:{width:"35vw"},attrs:{type:"textarea",placeholder:"买家消息翻译",maxlength:"9999","show-word-limit":"",rows:15,readonly:""},model:{value:e.replyTranslateChinese,callback:function(t){e.replyTranslateChinese=t},expression:"replyTranslateChinese"}})],1)]),e._v(" "),a("div",{staticStyle:{margin:"2vh 0 0 10vh",display:"flex"}},[a("div",{staticStyle:{flex:"4",border:"1px solid #dddddd"}},[a("ul",{staticClass:"textareaall"},e._l(e.allTextarea,function(t,l){return a("li",{key:l,staticStyle:{width:"50%"}},[a("h5",{staticStyle:{padding:"0.5vh",height:"5vh"}},[e._v("\n                国家："+e._s(t.country)+"---问题类型："+e._s(t.problem_type)+"\n              ")]),e._v(" "),a("div",{staticClass:"allDiv",staticStyle:{width:"100%",height:"13vh","overflow-y":"auto"},on:{click:function(t){return e.alldiv(l)}}},[e._v("\n                "+e._s(t.email_content)+"\n              ")])])}),0),e._v(" "),a("input",{staticClass:"elseCheckbox",attrs:{type:"checkbox"},on:{click:function(t){return e.elseCheckbox()}}}),a("textarea",{staticClass:"elseTexarea",attrs:{name:"",id:"",cols:"40",rows:"8"},on:{blur:function(t){return e.elseCheckbox()}}})]),e._v(" "),a("div",{staticStyle:{flex:"5"}},[a("el-input",{staticStyle:{width:"35vw",margin:"0 0 0 4.5vw"},attrs:{type:"textarea",placeholder:"模板翻译内容",maxlength:"9999","show-word-limit":"",rows:7,readonly:""},model:{value:e.replyTranslateChinese2,callback:function(t){e.replyTranslateChinese2=t},expression:"replyTranslateChinese2"}})],1)]),e._v(" "),a("div",{staticStyle:{margin:"2vh 0 0 10vh",display:"flex"}},[a("div",{staticStyle:{flex:"4"}},[a("div",{staticStyle:{"margin-bottom":"2vh"}},[e._v("\n            问题类型：\n            "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"20vw"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入内容"},model:{value:e.replyProblemType,callback:function(t){e.replyProblemType=t},expression:"replyProblemType"}})],1),e._v(" "),a("div",{staticStyle:{"max-height":"15vh","overflow-y":"auto"}},[e._v("\n            缺件及其数量\n            "),a("ul",{staticClass:"lessul",staticStyle:{width:"100%"}},e._l(e.partData,function(t,l){return a("li",{key:l,staticStyle:{width:"100%"}},[a("input",{staticClass:"lackCheck",attrs:{type:"checkbox"},on:{change:e.lackCheckChange}}),a("span",{staticClass:"lessspan"},[e._v(e._s(t.part_code))]),a("input",{staticClass:"lackDo",staticStyle:{width:"40%",height:"2.5vh"},attrs:{type:"number",value:"0",disabled:""}})])}),0)]),e._v(" "),a("div",{staticStyle:{"max-height":"15vh","overflow-y":"auto","margin-top":"2vh"}},[e._v("\n            破损及其数量\n            "),a("ul",{staticClass:"badul",staticStyle:{width:"100%"}},e._l(e.partData,function(t,l){return a("li",{key:l,staticStyle:{width:"100%"}},[a("input",{staticClass:"damagedCheck",attrs:{type:"checkbox"},on:{change:e.damageCheckChange}}),a("span",{staticClass:"damagespan"},[e._v(e._s(t.part_code))]),a("input",{staticClass:"damagedDo",staticStyle:{width:"40%",height:"2.5vh"},attrs:{type:"number",value:"0",min:"0",disabled:""}})])}),0)]),e._v(" "),a("div",[e._v("\n            相关操作:"),a("select",{directives:[{name:"model",rawName:"v-model",value:e.replyassociatedOperation,expression:"replyassociatedOperation"}],staticStyle:{width:"15vw",height:"3vh"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.replyassociatedOperation=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"发新品"}},[e._v("发新品")]),e._v(" "),a("option",{attrs:{value:"退全款"}},[e._v("退全款")]),e._v(" "),a("option",{attrs:{value:"部分退款"}},[e._v("部分退款")]),e._v(" "),a("option",{attrs:{value:"退货"}},[e._v("退货")])])]),e._v(" "),a("div",[e._v("\n            客户评级:"),a("select",{directives:[{name:"model",rawName:"v-model",value:e.replywhiteOrBlack,expression:"replywhiteOrBlack"}],staticStyle:{width:"15vw",height:"3vh"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.replywhiteOrBlack=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"白名单"}},[e._v("白名单")]),e._v(" "),a("option",{attrs:{value:"黑名单"}},[e._v("黑名单")])])]),e._v(" "),a("div",[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"123",multiple:"","before-upload":e.beforeUpload,"http-request":e.uploadFile}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n                将文件拖到此处，或\n                "),a("em",[e._v("点击上传")])])])],1)]),e._v(" "),a("div",{staticStyle:{flex:"6","margin-left":"14vw"}})]),e._v(" "),a("div",{staticStyle:{margin:"2vh 0 0 10vh",display:"flex","margin-bottom":"5vh"}},[a("div",{staticStyle:{flex:"1"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEmail()}}},[e._v("提 交")])],1),e._v(" "),a("div",{staticStyle:{flex:"1"}},[a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.replacement()}}},[e._v("重 置")])],1),e._v(" "),a("div",{staticStyle:{flex:"1"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.cancel()}}},[e._v("取 消")])],1),e._v(" "),a("div",{staticStyle:{flex:"6"}})])])],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("序号")]),e._v(" "),a("th",[e._v("站点")]),e._v(" "),a("th",[e._v("国家")]),e._v(" "),a("th",[e._v("订单编号")]),e._v(" "),a("th",[e._v("问题类型")]),e._v(" "),a("th",[e._v("处理时间")]),e._v(" "),a("th",[e._v("处理人")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{position:"absolute",top:"43vh",left:"41vw"}},[t("i",{staticClass:"el-icon-right",staticStyle:{"font-size":"2rem",color:"#66b1ff",opacity:"0.5"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{position:"absolute",top:"72vh",left:"41vw"}},[t("i",{staticClass:"el-icon-right",staticStyle:{"font-size":"2rem",color:"#66b1ff",opacity:"0.5"}})])}]};var c=a("VU/8")(o,s,!1,function(e){a("R1LG")},"data-v-c9753ca2",null);t.default=c.exports},R1LG:function(e,t){}});
//# sourceMappingURL=69.049344fe62c65d9e59d3.js.map