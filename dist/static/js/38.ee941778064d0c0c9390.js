webpackJsonp([38],{"/a3g":function(t,e){},"6mPd":function(t,e){},Jrvm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{errorTable:!1,updateStatusDialog:!1,id:"",loading:!1,ship_status:2,currentPage:1,total_num:0,row:{},dialogVisible:!1,tableData:[],editForm:{},rules:{contact_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone_number:[{required:!0,message:"请输入手机号码",trigger:"blur"}],city:[{required:!0,message:"请输入城市",trigger:"blur"}],state:[{required:!0,message:"请输入州/省",trigger:"blur"}],street:[{required:!0,message:"请输入街道",trigger:"blur"}],zip_code:[{required:!0,message:"请输入邮编",trigger:"blur"}],sku:[{required:!0,message:"请输入sku",trigger:"blur"}]},dialogVisible1:!1,tracing_no_form:{},orderId:"",exportIdVisible:!1,downloadLink:"",requestUrl:""}},methods:{updateSubmit:function(){var t=this,e=this._url2+"server/order_management/ca_update_state/";this.$axios.get(e,{params:{id:this.id}}).then(function(e){200===e.data.code?(t.$message.success(e.data.msg),t.updateStatusDialog=!0):t.$message.warning("请求未成功")})},updateStatus:function(t){this.id=t,this.updateStatusDialog=!0},exportData:function(t){this.exportIdVisible=!0,this.requestUrl=t&&"1"===t?"server/order_management/ca_export_data1/":"server/order_management/ca_export_data/"},submitId:function(){var t=this;this.exportIdVisible=!1,""!==this.orderId?this.$axios.get(this._url2+this.requestUrl,{params:{id:this.orderId}}).then(function(e){t.orderId="",200===e.data.code?(t.downloadLink=t._url2+e.data.data,console.log(t.downloadLink),t.downloadLink&&t.$nextTick(function(){t.$refs.downloadA.click()})):alert("请求错误")}):alert("请输入ID号")},changePage:function(t){var e="";this.currentPage=t,e=2===this.ship_status?"已发货":1===this.ship_status?"未发货":0===this.ship_status?"不发":"错误订单",this.getTableData(e)},go_roure:function(t){this.$router.push(t)},shipFun:function(t,e){!this.ship_status!==t&&(this.currentPage=1),this.ship_status=t,this.getTableData(e)},search_ship:function(){this.shipFun(2,"已发货")},search_nevership:function(){this.shipFun(0,"不发")},search_errorOrder:function(){this.shipFun(3,"错误订单")},search_noship:function(){this.shipFun(1,"未发货")},editData:function(t){for(var e in this.row=t,this.dialogVisible=!0,t)this.$set(this.editForm,e,t[e])},submitData:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.dialogVisible=!1;var a=new FormData;for(var r in e.editForm)e.row[r]=e.editForm[r],console.log(r),"phone_number"===r&&a.append("phone",e.editForm[r]),"id"!==r&&"contact_name"!==r&&"city"!==r&&"state"!==r&&"street"!==r&&"zip_code"!==r&&"sku"!==r||a.append(r,e.editForm[r]);3===e.ship_status&&a.append("status","error"),e.$axios.post(e._url2+"server/order_management/ca_shipment_update_data/",a).then(function(t){200===t.data.code?alert("提交成功！"):alert("提交失败")})})},add_tracing_no:function(t){this.dialogVisible1=!0,this.tracing_no_form=t},addTracingNo:function(){this.dialogVisible1=!1;var t=this._url2+"server/order_management/ca_update_tracking_no/";if(this.tracing_no_form.tracking_no&&0!==this.tracing_no_form.tracking_no.length){var e=new FormData;e.append("id",this.tracing_no_form.id),e.append("tracking_no",this.tracing_no_form.tracking_no),this.$axios.post(t,e).then(function(t){200===t.data.code?alert("增加追踪编号成功"):alert("增加失败")})}else alert("请输入追踪编号")},getTableData:function(t){var e=this;3===this.ship_status?this.errorTable=!0:this.errorTable=!1,this.loading=!0;this.$axios.get(this._url2+"server/order_management/ca_shipment_data/",{params:{status:t,page:this.currentPage}}).then(function(t){console.log(t),e.loading=!1,e.tableData=t.data.data||[],3===e.ship_status?e.$nextTick(function(){e.$refs.ErrorTable.bodyWrapper.scrollTop=0}):e.$nextTick(function(){e.$refs.notErrorTable.bodyWrapper.scrollTop=0}),t.data.nums.length>0&&(e.total_num=t.data.nums[0].all_num)})}},created:function(){this.getTableData("已发货")}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"canada_ship"}},[a("div",{staticClass:"topBtn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.search_ship}},[t._v("所有")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search_noship}},[t._v("未发货")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search_nevership}},[t._v("不发")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search_errorOrder}},[t._v("错误订单")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.go_roure("/Warehouse_data")}}},[t._v("仓库数据")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportData()}}},[t._v("点击导出")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportData("1")}}},[t._v("点击导出1")])],1),t._v(" "),a("div",{staticClass:"table_data"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:!t.errorTable,expression:"!errorTable"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"notErrorTable",staticStyle:{width:"100%"},attrs:{"max-height":"720",border:"",data:t.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{prop:"id",align:"center",label:"id",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"customer_order_number",align:"center",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contact_name",align:"center",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone_number",align:"center",label:"电话号码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"country_code",align:"center",label:"国家",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"city",align:"center",label:"城市"}}),t._v(" "),a("el-table-column",{attrs:{prop:"state",align:"center",label:"州/省"}}),t._v(" "),a("el-table-column",{attrs:{prop:"street",align:"center",label:"详细地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"zip_code",align:"center",label:"邮编",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sku",align:"center",label:"sku"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tracking_no",align:"center",label:"追踪编码"}}),t._v(" "),a("el-table-column",{attrs:{width:"220",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.editData(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.add_tracing_no(e.row)}}},[t._v("增加追踪编号")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.updateStatus(e.row.id)}}},[t._v("更新发货状态")])]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.errorTable,expression:"errorTable"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"ErrorTable",staticStyle:{width:"100%"},attrs:{"max-height":"720",border:"",data:t.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{prop:"id",align:"center",label:"id",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"customer_order_number",align:"center",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"failure_reason",align:"center",label:"错误原因"}}),t._v(" "),a("el-table-column",{attrs:{width:"220",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.editData(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":50,layout:"total, prev, pager, next, jumper",total:t.total_num},on:{"current-change":t.changePage}})],1),t._v(" "),a("el-dialog",{attrs:{title:"数据编辑",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"CanadaShipDialog",attrs:{inline:!0,model:t.editForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"contact_name"}},[a("el-input",{model:{value:t.editForm.contact_name,callback:function(e){t.$set(t.editForm,"contact_name",e)},expression:"editForm.contact_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话号码",prop:"phone_number"}},[a("el-input",{model:{value:t.editForm.phone_number,callback:function(e){t.$set(t.editForm,"phone_number",e)},expression:"editForm.phone_number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"城市",prop:"city"}},[a("el-input",{model:{value:t.editForm.city,callback:function(e){t.$set(t.editForm,"city",e)},expression:"editForm.city"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"州/省",prop:"state"}},[a("el-input",{model:{value:t.editForm.state,callback:function(e){t.$set(t.editForm,"state",e)},expression:"editForm.state"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"街道",prop:"street"}},[a("el-input",{model:{value:t.editForm.street,callback:function(e){t.$set(t.editForm,"street",e)},expression:"editForm.street"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮编",prop:"zip_code"}},[a("el-input",{model:{value:t.editForm.zip_code,callback:function(e){t.$set(t.editForm,"zip_code",e)},expression:"editForm.zip_code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"sku",prop:"sku"}},[a("el-input",{model:{value:t.editForm.sku,callback:function(e){t.$set(t.editForm,"sku",e)},expression:"editForm.sku"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitData("CanadaShipDialog")}}},[t._v("提交")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"数据编辑",visible:t.dialogVisible1,width:"40%"},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-form",{attrs:{inline:!0,model:t.tracing_no_form}},[a("el-form-item",{attrs:{label:"追踪编码"}},[a("el-input",{model:{value:t.tracing_no_form.tracking_no,callback:function(e){t.$set(t.tracing_no_form,"tracking_no",e)},expression:"tracing_no_form.tracking_no"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addTracingNo}},[t._v("提交")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"导出数据",visible:t.exportIdVisible,width:"40%"},on:{"update:visible":function(e){t.exportIdVisible=e}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"id"}},[a("el-input",{model:{value:t.orderId,callback:function(e){t.orderId=e},expression:"orderId"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitId}},[t._v("下载")])],1)],1),t._v(" "),a("a",{ref:"downloadA",staticStyle:{"z-index":"-1",position:"absolute",top:"0"},attrs:{href:t.downloadLink,download:""}},[t._v("导出")])],1),t._v(" "),a("el-dialog",{attrs:{title:"确认更新？",visible:t.updateStatusDialog,width:"400px"},on:{"update:visible":function(e){t.updateStatusDialog=e}}},[a("div",{staticStyle:{display:"flex","justify-content":"space-evenly",width:"280px",margin:"0 auto"}},[a("el-button",{staticStyle:{"margin-left":"0"},on:{click:function(e){t.updateStatusDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:t.updateSubmit}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(r,i,!1,function(t){a("6mPd"),a("/a3g")},null,null);e.default=n.exports}});
//# sourceMappingURL=38.ee941778064d0c0c9390.js.map