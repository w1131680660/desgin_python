webpackJsonp([91],{"1jbK":function(t,e){},"Tp+j":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("bOdI"),o={data:function(){return{curIndex:0,update_area:"",data_date:"",menulist:["全部"],tableData:[],addDialogVisible:!1,addForm:{update_area:"",update_person:"",update_time:"",update_info:""},jobs:["前端","后端"],editDialogVisible:!1,editForm:{update_area:"",update_person:"",update_time:"",update_info:""},selectID:[],data_id:""}},methods:a.n(i)()({selectMenu:function(t,e){this.curIndex=t,this.data_date="全部"===e?"":e,this.initData()},searchData:function(t){this.update_area=t,this.initData()},initMenu:function(){var t=this,e=this._url2+"server/personnel_management/get_down_box_system_update_log/";this.$axios.get(e).then(function(e){if(200==e.data.code){var a=e.data.data||[];t.menulist=t.menulist.concat(a)}})},initData:function(){var t=this,e=this._url2+"server/personnel_management/select_system_update_log/";this.$axios.get(e,{params:{update_area:this.update_area,data_date:this.data_date}}).then(function(e){200==e.data.code&&(t.tableData=e.data.data||[])})},cancelAddForm:function(){for(var t in this.addForm)this.addForm[t]="";this.addDialogVisible=!1},submitAddForm:function(){var t=this;for(var e in this.addFormData=new FormData,this.addForm){if(""===this.addForm[e]||null===this.addForm[e])return void alert("所有字段必填！");this.addFormData.append(e,this.addForm[e])}this.addDialogVisible=!1;var a=this._url2+"server/personnel_management/insert_system_update_log/";this.$axios.post(a,this.addFormData).then(function(e){if(console.log(e),200==e.data.code)for(var a in alert("新增成功！"),t.initData(),t.addForm)t.addForm[a]=""})},addNew:function(){this.addDialogVisible=!0},editData:function(){this.selectID=[];var t=this;if($(".tablebox input:checked").each(function(){console.log($(this)),console.log("选中了",$(this).val()),t.selectID.push($(this).val())}),$(".tablebox input:checked").length)if($(".tablebox input:checked").length>1)alert("请选择一个进行编辑！");else{console.log(this.selectID);var e=this.selectID[0],a=this.tableData.find(function(t){return t.id==e});this.editForm.update_area=a.update_area,this.editForm.update_person=a.update_person,this.editForm.update_time=a.update_time,this.editForm.update_info=a.update_info,this.data_id=e,this.editDialogVisible=!0}else alert("请选择一个进行编辑！")},deleteData:function(){var t=this;this.selectID=[];var e=this;$(".tablebox input:checked").each(function(){e.selectID.push($(this).val())}),$(".tablebox input:checked").length?(console.log(this.selectID),this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t._url2+"server/personnel_management/delete_system_update_log/";t.$axios.get(e,{params:{data_id:t.selectID}}).then(function(e){console.log(e),200===e.data.code&&(t.$message("删除成功！"),t.initData(),t.selectID=[],$(".tablebox input[type='checkbox']").prop("checked",!1))})}).catch(function(t){console.log(t)})):alert("请至少选择一个进行删除！")},cancelEditForm:function(){console.log("关闭弹框"),this.editDialogVisible=!1},submitEditForm:function(){var t=this;for(var e in console.log("提交弹框"),this.editFormData=new FormData,console.log(this.editForm),this.editForm){if(console.log(e,!this.editForm[e]),!this.editForm[e]||!this.editForm[e].trim())return void alert("所有字段必填！");this.editFormData.append(e,this.editForm[e])}this.editDialogVisible=!1,this.editFormData.append("data_id",this.data_id);var a=this._url2+"server/personnel_management/update_system_update_log/";this.$axios.post(a,this.editFormData).then(function(e){200==e.data.code?(alert("修改成功"),t.initData(),t.data_id=""):alert("修改未成功！")})}},"cancelEditForm",function(){}),created:function(){var t=this;console.log("giac"),this.$axios({url:this._url2+"server/stock_management/is_open/",method:"get"}).then(function(e){200==e.data.code?(t.initMenu(),t.initData()):(alert("你没有权限进入这个页面"),t.$router.push("/Login"))})}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"SysUpdateLog"}},[a("div",{staticClass:"left_menu"},[a("ul",t._l(t.menulist,function(e,i){return a("li",{key:i,class:{active:t.curIndex===i},on:{click:function(a){return t.selectMenu(i,e)}}},[t._v("\n        "+t._s(e)+"\n      ")])}),0)]),t._v(" "),a("div",{staticClass:"right_con"},[a("h2",[t._v("系统更新日志")]),t._v(" "),a("div",{staticClass:"topOpt"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.searchData("前端")}}},[t._v("前端")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.searchData("后端")}}},[t._v("后端")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addNew}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.editData}},[t._v("修改数据")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.deleteData}},[t._v("删除数据")])],1),t._v(" "),a("div",{staticClass:"TableCon"},[a("table",{staticClass:"tablebox"},[t._m(0),t._v(" "),a("tbody",t._l(t.tableData,function(e,i){return a("tr",{key:i},[a("td",[a("div",[a("input",{attrs:{type:"checkbox"},domProps:{value:e.id}})])]),t._v(" "),a("td",[a("div",[t._v(t._s(e.update_person))])]),t._v(" "),a("td",[a("div",[t._v(t._s(e.update_time))])]),t._v(" "),a("td",[a("div",[t._v(t._s(e.update_info))])])])}),0)]),t._v(" "),a("el-dialog",{attrs:{title:"新增日志",visible:t.addDialogVisible,width:"400px","before-close":t.cancelAddForm},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("div",{staticClass:"addForm"},[a("div",{staticClass:"form_item"},[a("p",[t._v("职位：")]),t._v(" "),a("el-select",{model:{value:t.addForm.update_area,callback:function(e){t.$set(t.addForm,"update_area",e)},expression:"addForm.update_area"}},t._l(t.jobs,function(e,i){return a("el-option",{key:i,attrs:{label:e,value:e}},[t._v("\n                "+t._s(e)+"\n              ")])}),1)],1),t._v(" "),a("div",{staticClass:"form_item"},[a("p",[t._v("用户名：")]),t._v(" "),a("el-input",{model:{value:t.addForm.update_person,callback:function(e){t.$set(t.addForm,"update_person",e)},expression:"addForm.update_person"}})],1),t._v(" "),a("div",{staticClass:"form_item"},[a("p",[t._v("时间：")]),t._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.addForm.update_time,callback:function(e){t.$set(t.addForm,"update_time",e)},expression:"addForm.update_time"}})],1),t._v(" "),a("div",{staticClass:"form_item"},[a("p",[t._v("内容：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:t.addForm.update_info,callback:function(e){t.$set(t.addForm,"update_info",e)},expression:"addForm.update_info"}})],1),t._v(" "),a("div",{staticClass:"form_item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.submitAddForm}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.cancelAddForm}},[t._v("取消")])],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"编辑日志",visible:t.editDialogVisible,width:"400px","before-close":function(){t.editDialogVisible=!1}},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("div",{staticClass:"addForm"},[a("div",{staticClass:"form_item"},[a("p",[t._v("职位：")]),t._v(" "),a("el-select",{model:{value:t.editForm.update_area,callback:function(e){t.$set(t.editForm,"update_area",e)},expression:"editForm.update_area"}},t._l(t.jobs,function(e,i){return a("el-option",{key:i,attrs:{label:e,value:e}},[t._v("\n                "+t._s(e)+"\n              ")])}),1)],1),t._v(" "),a("div",{staticClass:"form_item"},[a("p",[t._v("用户名：")]),t._v(" "),a("el-input",{model:{value:t.editForm.update_person,callback:function(e){t.$set(t.editForm,"update_person",e)},expression:"editForm.update_person"}})],1),t._v(" "),a("div",{staticClass:"form_item"},[a("p",[t._v("时间：")]),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.editForm.update_time,callback:function(e){t.$set(t.editForm,"update_time",e)},expression:"editForm.update_time"}})],1),t._v(" "),a("div",{staticClass:"form_item"},[a("p",[t._v("内容：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:t.editForm.update_info,callback:function(e){t.$set(t.editForm,"update_info",e)},expression:"editForm.update_info"}})],1),t._v(" "),a("div",{staticClass:"form_item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.submitEditForm}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取消")])],1)])])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[e("div")]),this._v(" "),e("th",[e("div",[this._v("人员")])]),this._v(" "),e("th",[e("div",[this._v("时间")])]),this._v(" "),e("th",[e("div",[this._v("内容")])])])])}]};var d=a("VU/8")(o,s,!1,function(t){a("1jbK")},"data-v-3465ad1a",null);e.default=d.exports}});
//# sourceMappingURL=91.3a6faad5c1405956864c.js.map