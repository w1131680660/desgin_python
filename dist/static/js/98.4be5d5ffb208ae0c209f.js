webpackJsonp([98],{"4Ps6":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mtWM"),i=a.n(n),r={data:function(){return{tableData:[],leftNavData:[],firstNav:"全部",twiceNav:"",threeNav:"",total:0,page:1,xAxis:[{type:"category",data:[],axisPointer:{type:"shadow"}}],series:[{name:"好评数",type:"bar",data:[]},{name:"总条数",type:"bar",data:[]},{name:"比率",type:"line",yAxisIndex:1,data:[]}]}},methods:{getDefaultData:function(){var t=this;i()({url:this._url2+"server/customer_management/nice_comment",method:"get",params:{page:1}}).then(function(e){console.log(e),t.tableData=e.data.nice_comment_data})},getChart:function(t,e,a,n){var r=this;console.log(t,e,a,n),i()({url:this._url2+"server/customer_management/nice_comment",method:"get",params:{site:t,platform:e,country:a,upload_people:n,serach:"1"}}).then(function(t){console.log(t.data.nice_comment_data),r.xAxis[0].data=[],r.series[0].data=[],r.series[1].data=[],r.series[2].data=[];for(var e=0;e<t.data.nice_comment_data.length;e++)t.data.nice_comment_data[e].date&&(r.xAxis[0].data[e]=t.data.nice_comment_data[e].date,r.series[0].data[e]=t.data.nice_comment_data[e].count_praise,r.series[1].data[e]=t.data.nice_comment_data[e].count_all,r.series[2].data[e]=(t.data.nice_comment_data[e].count_praise/t.data.nice_comment_data[e].count_all).toFixed(2));r.getEchartData()})},getDateTable:function(){var t=this;"全部"==this.firstNav&&(this.firstNav=null);var e=document.querySelector(".beginDate").value,a=document.querySelector(".endDate").value;console.log(e,a,888),console.log(this.threeNav,this.twiceNav,this.firstNav,1),i()({url:this._url2+"server/customer_management/nice_comment",method:"get",params:{platform:this.firstNav,country:this.twiceNav,site:this.threeNav,page:1,begin_date:e,over_date:a}}).then(function(e){console.log(e),t.tableData=e.data.nice_comment_data,t.$nextTick(function(){$(".favorableRate>tbody").scrollTop(0)}),t.page=1}),null==this.firstNav&&(this.firstNav="全部")},NavClick:function(t,e,a){var n=this;this.firstNav=t,this.twiceNav=e,this.threeNav=a,document.querySelector(".beginDate").value="",document.querySelector(".endDate").value="",i()({url:this._url2+"server/customer_management/nice_comment",method:"get",params:{platform:this.firstNav,country:this.twiceNav,site:this.threeNav,page:1}}).then(function(t){console.log(t),n.tableData=t.data.nice_comment_data,n.$nextTick(function(){$(".favorableRate>tbody").scrollTop(0)}),n.page=1})},getEchartData:function(){var t=this.$refs.chart;if(t){var e=this.$echarts.init(t),a={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["好评数","总条数","比率"]},xAxis:this.xAxis,yAxis:[{type:"value",name:"数量",min:0,max:100,interval:10,axisLabel:{formatter:"{value} "}},{type:"value",name:"比率",min:0,max:1,interval:.1,axisLabel:{formatter:"{value} "}}],series:this.series};e.setOption(a),window.addEventListener("resize",function(){e.resize()})}this.$on("hook:destoryed",function(){window.removeEventListener("resize",function(){myChart.resize()})})},handleCurrentChange:function(t){var e=this;this.page=t;var a=document.querySelector(".beginDate").value,n=document.querySelector(".endDate").value;i()({url:this._url2+"server/customer_management/nice_comment",method:"get",params:{platform:this.firstNav,country:this.twiceNav,language:this.threeNav,page:this.page,begin_date:a,over_date:n}}).then(function(t){console.log(t),e.tableData=t.data.nice_comment_data,e.$nextTick(function(){$(".favorableRate>tbody").scrollTop(0)})})}},mounted:function(){window.addEventListener("scroll",this.handleScroll),this.getEchartData()},created:function(){var t=this;this.getDefaultData(),i()({url:this._url2+"server/personnel_management/area_sign2/",method:"get"}).then(function(e){console.log(e,5),t.leftNavData=e.data.data})}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-menu",{staticClass:"leftNav",attrs:{"unique-opened":""}},t._l(t.leftNavData,function(e,n){return a("el-submenu",{key:n,attrs:{index:n+""}},[a("template",{slot:"title"},[t._v(t._s(n))]),t._v(" "),t._l(e,function(e,i){return a("el-submenu",{key:i,attrs:{index:i+""}},[a("template",{slot:"title"},[t._v(t._s(i))]),t._v(" "),t._l(e,function(e,r){return a("el-menu-item",{key:r,attrs:{index:i+e},on:{click:function(a){return t.NavClick(n,i,e)}}},[t._v(t._s(e))])})],2)})],2)}),1),t._v(" "),a("div",{staticStyle:{"margin-left":"13vw","padding-top":"2vh",height:"85vh",overflow:"auto"}},[a("h2",{staticStyle:{color:"white"}},[t._v("\n      店铺："+t._s(t.firstNav)+"-"+t._s(t.twiceNav)+"-"+t._s(t.threeNav)+"\n    ")]),t._v(" "),a("h4",{staticStyle:{margin:"2vh 0 1vh 0",color:"white"}},[t._v("好评率(站外)")]),t._v(" "),a("div",{staticStyle:{color:"white"}},[t._v("\n      起始时间："),a("input",{staticClass:"beginDate",staticStyle:{color:"black"},attrs:{type:"date"},on:{change:function(e){return t.getDateTable()}}}),t._v("\n      结束时间："),a("input",{staticClass:"endDate",staticStyle:{color:"black"},attrs:{type:"date"},on:{change:function(e){return t.getDateTable()}}})]),t._v(" "),a("table",{staticClass:"favorableRate"},[t._m(0),t._v(" "),a("tbody",t._l(t.tableData,function(e,n){return a("tr",{key:n,staticStyle:{cursor:"pointer"},on:{click:function(a){return t.getChart(e.site,e.platform,e.country,e.upload_people)}}},[a("td",[t._v(t._s(n+1+50*(t.page-1)))]),t._v(" "),a("td",[t._v(t._s(e.site))]),t._v(" "),a("td",[t._v(t._s(e.platform))]),t._v(" "),a("td",[t._v(t._s(e.country))]),t._v(" "),a("td",[t._v(t._s(e.count_all))]),t._v(" "),a("td",[t._v(t._s(e.count_praise))]),t._v(" "),a("td",[t._v(t._s((e.count_praise/e.count_all).toFixed(2)))]),t._v(" "),a("td",[t._v(t._s(e.upload_people))])])}),0)]),t._v(" "),a("el-pagination",{staticClass:"pagetotle",staticStyle:{margin:"1vh 0 0 35vw"},attrs:{background:"","current-page":t.page,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("div",{ref:"chart",staticStyle:{width:"60vw",height:"376px","padding-right":"5vw",margin:"3vh 0 0 14vw",background:"rgba(255, 255, 255, 0.9)"}})],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("站点")]),t._v(" "),a("th",[t._v("平台")]),t._v(" "),a("th",[t._v("国家")]),t._v(" "),a("th",[t._v("邮件总数量")]),t._v(" "),a("th",[t._v("好评数")]),t._v(" "),a("th",[t._v("好评率")]),t._v(" "),a("th",[t._v("运营人员")])])])}]};var s=a("VU/8")(r,o,!1,function(t){a("i073")},"data-v-1cb87cd9",null);e.default=s.exports},i073:function(t,e){}});
//# sourceMappingURL=98.4be5d5ffb208ae0c209f.js.map