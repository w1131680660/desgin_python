webpackJsonp([59],{NkZS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("mtWM"),a=n.n(s),r={data:function(){return{isEditSpu:!1,platformLsit:[],platform:"",prevOneMonth:"",prevTwoMonth:"",prevThreeMonth:"",nextMonth:"",leftNavData:[],firstNav:"",twiceNav:"",threeNav:"",re_spu_list:[],re_spu_data:[],re_sku_data:[],spu:"",startEdit:!1}},methods:{editChange:function(t){var e=this;if(isNaN(t.coefficient))return t.coefficient="",console.log(this.isEditSpu),void alert("请输入数字类型");console.log(t),this.isEditSpu=!1;var n=this._url2+"server/stock_management/Inventory_forecast/",s=new FormData;s.append("id",t.id),s.append("coefficient",t.coefficient),this.$axios.post(n,s).then(function(t){console.log(t),200===t.data.code&&(alert("提交成功"),e.reloadData())})},editChange1:function(t){var e=this;if(isNaN(t.coefficient))return t.coefficient="",console.log(this.isEditSpu),void alert("请输入数字类型");console.log(t),this.isEditSpu=!1;var n=this._url2+"server/stock_management/Inventory_forecast/",s=new FormData;s.append("id",t.id),s.append("coefficient",t.coefficient),this.$axios.post(n,s).then(function(t){console.log(t),200===t.data.code&&(alert("提交成功"),e.reloadData())})},editCoefficient1:function(){this.startEdit&&(this.isEditSpu=!0)},editCoefficient2:function(){this.startEdit&&(this.isEditSpu1=!0)},NavClick:function(t,e,n){var s=this;this.firstNav=t,this.twiceNav=e,this.threeNav=n,a()({url:this._url2+"server/stock_management/Inventory_forecast/",method:"get",params:{site:this.threeNav,country:this.twiceNav}}).then(function(t){s.re_spu_list=t.data.re_spu_list;for(var e=document.querySelectorAll(".allLi"),n=0;n<e.length;n++)e[n].style.background="";s.re_spu_data=[],s.re_sku_data=[],s.spu=""})},reloadData:function(){var t=this;a.a.get(this._url2+"server/stock_management/Inventory_forecast/",{params:{site:this.threeNav,country:this.twiceNav,spu:this.spu}}).then(function(e){console.log(e),t.re_spu_data=e.data.re_spu_data[t.spu],console.log(t.re_spu_data),t.re_sku_data=e.data.re_sku_data})},tagLi:function(t,e){for(var n=this,s=document.querySelectorAll(".allLi"),r=0;r<s.length;r++)s[r].style.background="";s[e].style.background="skyblue",a()({url:this._url2+"server/stock_management/Inventory_forecast/",method:"get",params:{site:this.threeNav,country:this.twiceNav,spu:t}}).then(function(e){n.startEdit=!0,console.log(e),n.spu=t,n.re_spu_data=e.data.re_spu_data[t],console.log(n.re_spu_data),n.re_sku_data=e.data.re_sku_data})},getNum:function(t){return t=t?parseInt(t):0}},mounted:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),s=t.getDate();console.log(s),s>15?(parseInt(n)<11?this.nextMonth=e+"-"+(parseInt(n)+2):this.nextMonth=parseInt(e)+1+"-1",parseInt(n)>1?(this.prevOneMonth=e+"-"+(parseInt(n)+1),this.prevTwoMonth=e+"-"+parseInt(n),this.prevThreeMonth=e+"-"+(parseInt(n)-1)):1==parseInt(n)?(this.prevOneMonth=e+"-"+(parseInt(n)+1),this.prevTwoMonth=e+"-"+parseInt(n),this.prevThreeMonth=parseInt(e)-1+"-12"):0==parseInt(n)&&(this.prevOneMonth=parseInt(e)+"-1",this.prevTwoMonth=parseInt(e)-1+"-12",this.prevThreeMonth=parseInt(e)-1+"-11")):(parseInt(n)<12?this.nextMonth=e+"-"+(parseInt(n)+1):this.nextMonth=parseInt(e)+1+"-1",parseInt(n)>2?(this.prevOneMonth=e+"-"+parseInt(n),this.prevTwoMonth=e+"-"+(parseInt(n)-1),this.prevThreeMonth=e+"-"+(parseInt(n)-2)):2==parseInt(n)?(this.prevOneMonth=e+"-"+parseInt(n),this.prevTwoMonth=e+"-"+(parseInt(n)-1),this.prevThreeMonth=parseInt(e)-1+"-12"):1==parseInt(n)?(this.prevOneMonth=e+"-"+parseInt(n),this.prevTwoMonth=parseInt(e)-1+"-12",this.prevThreeMonth=parseInt(e)-1+"-11"):0==parseInt(n)&&(this.prevOneMonth=parseInt(e)-1+"-12",this.prevTwoMonth=parseInt(e)-1+"-11",this.prevThreeMonth=parseInt(e)-1+"-10"))},created:function(){var t=this;a()({url:this._url2+"server/personnel_management/area_sign2/",method:"get"}).then(function(e){console.log(e,5),t.leftNavData=e.data.data})}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bigBox"},[n("div",{staticClass:"leftDiv"},[n("el-menu",{staticClass:"leftNav",attrs:{"unique-opened":""}},t._l(t.leftNavData,function(e,s){return n("el-submenu",{key:s,attrs:{index:s+""}},[n("template",{slot:"title"},[t._v(t._s(s))]),t._v(" "),t._l(e,function(e,a){return n("el-submenu",{key:a,attrs:{index:a+""}},[n("template",{slot:"title"},[t._v(t._s(a))]),t._v(" "),t._l(e,function(e,r){return n("el-menu-item",{key:r,attrs:{index:a+e},on:{click:function(n){return t.NavClick(s,a,e)}}},[t._v(t._s(e))])})],2)})],2)}),1)],1),t._v(" "),n("div",{staticClass:"rightDiv"},[n("div",[n("ul",{staticClass:"rightUl"},t._l(t.re_spu_list,function(e,s){return n("li",{key:s,staticClass:"allLi",on:{click:function(n){return t.tagLi(e,s)}}},[t._v("\n          "+t._s(e)+"\n        ")])}),0)]),t._v(" "),n("h3",[t._v("预期月销量")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("---")]),t._v(" "),n("th",[t._v(t._s(t.prevThreeMonth))]),t._v(" "),n("th",[t._v(t._s(t.prevTwoMonth))]),t._v(" "),n("th",[t._v(t._s(t.prevOneMonth))]),t._v(" "),n("th",[t._v("订单比率")]),t._v(" "),n("th",[t._v(t._s(t.nextMonth)+"备货")]),t._v(" "),n("th",[t._v("\n            修正系数\n            "),n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.editCoefficient1}},[t._v("编 辑")])],1),t._v(" "),n("th",[t._v("预期修正")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v(t._s(t.spu))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.before_month_2))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.before_month_1))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.before_month))]),t._v(" "),n("td"),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.ready_month))]),t._v(" "),n("td",[n("span",[t._v(t._s(t.re_spu_data.coefficient))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.re_spu_data.coefficient,expression:"re_spu_data.coefficient"}],staticClass:"editSpu",style:{zIndex:t.isEditSpu?"1":"-1"},attrs:{type:"text"},domProps:{value:t.re_spu_data.coefficient},on:{blur:function(e){return t.editChange(t.re_spu_data)},input:function(e){e.target.composing||t.$set(t.re_spu_data,"coefficient",e.target.value)}}})]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.expected_num))])]),t._v(" "),t._l(t.re_sku_data,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e.sku))]),t._v(" "),n("td",[t._v(t._s(e.before_month_2))]),t._v(" "),n("td",[t._v(t._s(e.before_month_1))]),t._v(" "),n("td",[t._v(t._s(e.before_month))]),t._v(" "),n("td",[t._v("\n            "+t._s(((t.getNum(e.before_month_2)+t.getNum(e.before_month_1)+t.getNum(e.before_month))/(t.getNum(t.re_spu_data.before_month_2)+t.getNum(t.re_spu_data.before_month_1)+t.getNum(t.re_spu_data.before_month))).toFixed(2))+"\n          ")]),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td")])})],2)]),t._v(" "),n("h3",[t._v("发货数量")]),t._v(" "),n("table",[t._m(0),t._v(" "),n("tbody",[n("tr",[n("td",[t._v(t._s(t.spu))]),t._v(" "),n("td",[t._v("\n            "+t._s(t.re_spu_data.coefficient)+"\n            ")]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.safety_inventory))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.last_month_inventory))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.should_inventory))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.expected_num))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.expected_num))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.actual_inventory))]),t._v(" "),n("td",[t._v(t._s(t.re_spu_data.ship_num))])])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("spu")]),t._v(" "),n("th",[t._v("\n            库存系数\n            ")]),t._v(" "),n("th",[t._v("安全库存")]),t._v(" "),n("th",[t._v("下个月所剩库存")]),t._v(" "),n("th",[t._v("应有库存")]),t._v(" "),n("th",[t._v("预期销量+")]),t._v(" "),n("th",[t._v("预期销量")]),t._v(" "),n("th",[t._v("实际库存")]),t._v(" "),n("th",[t._v("发货数量")])])])}]};var i=n("VU/8")(r,_,!1,function(t){n("Ws/u")},"data-v-faca8264",null);e.default=i.exports},"Ws/u":function(t,e){}});
//# sourceMappingURL=59.2f7aeeb1fb7d35a900a3.js.map