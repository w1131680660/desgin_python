webpackJsonp([70],{lUaC:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("d7EF"),s=e.n(n),r={data:function(){return{chartDataObj:[],data1:[],data2:[],data3:[],chartData:{xAxis:[],seriesData:[]},storeMenu:[],formData:{daterange:"",all_num:"",refundnum:""},station:"",country:"",dateranges:[7,15,30,45,60,90,150],channel:"all",channels:[]}},methods:{search:function(){var t=this;if(console.log(this.channel,this.station,this.formData.daterange),this.channel&&"all"!==this.channel&&this.station&&"all"!==this.station&&this.country&&"all"!==this.country&&this.formData.daterange){var a=new FormData;a.append("channel",this.channel),a.append("station",this.station),a.append("country",this.country),a.append("days",this.formData.daterange),this.$axios.post(this._url2+"server/order_management/refund_times_monitor/",a).then(function(a){t.formData.all_num=a.data.all_orders,t.formData.refundnum=a.data.refund_orders,t.chartData.xAxis=[],t.chartData.seriesData=[],t.chartDataObj=a.data.data,t.chartDataObj.forEach(function(a){t.chartData.xAxis.push(a.day),t.chartData.seriesData.push(a.order_num)}),t.initEchart()})}else alert("必须选择渠道、国家、站点、时间范围！")},initEchart:function(){var t=this,a={title:{text:"订单退款"},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.chartData.xAxis},yAxis:{type:"value"},series:[{name:"退货时间",type:"line",stack:"退货时间",data:this.chartData.seriesData,label:{normal:{show:!0,position:"top"}}}]},e=this.$refs.chart;e&&(this.myChart=this.$echarts.init(e),this.myChart.setOption(a),window.addEventListener("resize",function(){t.myChart.resize()})),this.$on("hook:destoryed",function(){window.removeEventListener("resize",function(){t.myChart.resize()})})},changeDate:function(t){console.log(t)},go_route:function(t){console.log(t),this.$router.push(t)},changeChannel:function(){var t=this;if(this.storeMenu=[],this.formData.all_num="",this.formData.refundnum="","all"!==this.channel){var a=this.channels.findIndex(function(a){return a===t.channel});this.data2[a].forEach(function(e,n){var s={};s.country=e,console.log(n,t.data3[a][n]),s.stations=t.data3[a][n],t.storeMenu.push(s)})}},selectSku:function(t,a){this.formData.all_num="",this.formData.refundnum="";var e=t.split("-").map(function(t){return Number(t)-1}),n=s()(e,2),r=n[0],i=n[1],o=this.storeMenu[r];this.country=o.country,this.station=o.stations[i],this.search()}},mounted:function(){this.initEchart()},created:function(){var t=this;this.$axios.get(this._url2+"server/personnel_management/area_sign1/").then(function(a){console.log(a),t.data1=a.data.data1,t.data2=a.data.data2,t.data3=a.data.data3,t.channels=t.data1||[],t.formData.daterange=7,t.channel=t.channels[0],t.changeChannel(),t.country=t.storeMenu[0].country,t.station=t.storeMenu[0].stations[0],console.log(t.channel,t.station,t.formData.daterange),t.search()})}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order_refund"},[e("div",{staticClass:"left_menu"},[e("div",[e("el-select",{attrs:{placeholder:"请选择渠道"},on:{change:t.changeChannel},model:{value:t.channel,callback:function(a){t.channel=a},expression:"channel"}},[e("el-option",{attrs:{label:"全部",value:"all"}}),t._v(" "),t._l(t.channels,function(t,a){return e("el-option",{key:a,attrs:{label:t,value:t}})})],2)],1),t._v(" "),e("div",{staticClass:"subMenu"},[e("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1-1"},on:{select:t.selectSku}},t._l(t.storeMenu,function(a,n){return e("el-submenu",{key:n,attrs:{index:n+1+""}},[e("template",{slot:"title"},[e("span",[t._v(t._s(a.country))])]),t._v(" "),e("el-menu-item-group",t._l(a.stations,function(a,s){return e("el-menu-item",{key:s,attrs:{index:n+1+"-"+(s+1)}},[t._v(t._s(a))])}),1)],2)}),1)],1),t._v(" "),e("button",{staticClass:"toDetail",on:{click:function(a){return t.go_route("/ReturnTimeDetail")}}},[t._v("\n      详情查看\n    ")])]),t._v(" "),e("div",{staticClass:"rightbox"},[e("div",{staticClass:"topOption"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formData}},[e("el-form-item",{attrs:{label:"时间范围"}},[e("el-select",{attrs:{placeholder:"请选择时间范围"},model:{value:t.formData.daterange,callback:function(a){t.$set(t.formData,"daterange",a)},expression:"formData.daterange"}},t._l(t.dateranges,function(t,a){return e("el-option",{key:a,attrs:{label:t+"天",value:t}})}),1)],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),e("div",[e("el-form-item",{attrs:{label:"总订单量"}},[e("el-input",{attrs:{disabled:""},model:{value:t.formData.all_num,callback:function(a){t.$set(t.formData,"all_num",a)},expression:"formData.all_num"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"退货单量"}},[e("el-input",{attrs:{disabled:""},model:{value:t.formData.refundnum,callback:function(a){t.$set(t.formData,"refundnum",a)},expression:"formData.refundnum"}})],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"chart_box"},[e("div",{ref:"chart",staticClass:"chart",staticStyle:{width:"80%",height:"500px",margin:"0 auto"}})])])])},staticRenderFns:[]};var o=e("VU/8")(r,i,!1,function(t){e("sX+4")},"data-v-c5dff56c",null);a.default=o.exports},"sX+4":function(t,a){}});
//# sourceMappingURL=70.8d7d9c3da40ff2e04b3b.js.map