webpackJsonp([74],{KGhv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("BO1k"),i=n.n(a),l=n("Gu7T"),o=n.n(l),s={name:"",props:{},components:{},data:function(){return{menuPlatFormList:[],menuCountryList:[],menuSiteList:[],showCountryList:[],showSiteList:[],lastSiteList:[],platformOnce:[],badCommentList:[],checkedPlatform:"",checkedCountry:"",checkedSite:"",checkedStatus:"",skuList:[],checkedSku:"",selectNum:"",selection:[],handleDialogVisble:!1,file:"",fileData:[],currentPage:1,total:0,pageSize:20,headData:[{title:"渠道",key:"0"},{title:"站点",key:"1"},{title:"国家",key:"2"},{title:"sku",key:"3"},{title:"ASIN",key:"4"},{title:"抓取时间",key:"5"},{title:"客户名",key:"6"},{title:"评价星级",key:"7"},{title:"评论发布时间",key:"8"},{title:"前台链接",key:"9"},{title:"客户评论链接",key:"10"},{title:"处理情况",key:"11"},{title:"处理时间",key:"12"},{title:"处理人",key:"13"}],loading:!0}},computed:{},watch:{},methods:{getMenuList:function(){var t=this;this.$api.getMenuList().then(function(e){t.menuPlatFormList=e.data.data1,t.menuCountryList=e.data.data2,t.menuSiteList=e.data.data3,t.showCountryList=t.menuCountryList[0],t.showSiteList=t.menuSiteList[0],t.lastSiteList=t.showSiteList[0],t.checkedPlatform=t.menuPlatFormList[0],t.checkedCountry=t.showCountryList[0],t.checkedSite=t.lastSiteList[0],t.thirdClick(t.checkedPlatform,t.checkedCountry,t.checkedSite)})},skuChange:function(t){var e=this;console.log(t);this.checkedStatus="",this.loading=!0,this.$api.queryBadComment(this.checkedPlatform,this.checkedCountry,this.checkedSite,1,this.checkedSku,this.checkedStatus).then(function(t){console.log(t),e.badCommentList=e.$utils.deepClone(t.data.data),e.badCommentList=e.badCommetListSort(e.badCommentList),e.loading=!1,e.currentPage=1,e.total=t.data.all_number})},onceClick:function(t){this.showCountryList=[],this.showSiteList=[],this.showCountryList=this.menuCountryList[t],this.showSiteList=this.menuSiteList[t],this.platformOnce[t]=1},secondClick:function(t){this.lastSiteList=[],this.lastSiteList=this.showSiteList[t]},thirdClick:function(t,e,n){var a=this;this.checkedPlatform=t,this.checkedCountry=e,this.checkedSite=n,this.checkedStatus="",this.checkedSku="";this.loading=!0,this.$api.queryBadComment(t,e,n,1).then(function(t){console.log(t),a.skuList=t.data.all_sku_list,a.badCommentList=a.$utils.deepClone(t.data.data),a.badCommentList=a.badCommetListSort(a.badCommentList),a.$nextTick(function(){a.$refs.ncTable.bodyWrapper.scrollTop=0}),a.loading=!1,a.currentPage=1,a.total=t.data.all_number})},badCommetListSort:function(t){for(var e=[],n=0;n<t.length;n++)"未处理"==t[n][11]&&(e.push(t[n]),t.splice(n,1),n--);return e.push.apply(e,o()(t)),e},selectChange:function(t){},handleBefore:function(){var t=this;console.log("未处理"),this.checkedStatus="未处理";this.loading=!0,this.$api.queryBadComment(this.checkedPlatform,this.checkedCountry,this.checkedSite,1,this.checkedSku,this.checkedStatus).then(function(e){console.log(e),t.badCommentList=e.data.data,t.$nextTick(function(){t.$refs.ncTable.bodyWrapper.scrollTop=0}),t.loading=!1,t.currentPage=1,t.total=e.data.all_number})},handling:function(){var t=this;console.log("处理中"),this.checkedStatus="处理中";this.loading=!0,this.$api.queryBadComment(this.checkedPlatform,this.checkedCountry,this.checkedSite,1,this.checkedSku,this.checkedStatus).then(function(e){console.log(e),t.badCommentList=e.data.data,t.$nextTick(function(){t.$refs.ncTable.bodyWrapper.scrollTop=0}),t.loading=!1,t.currentPage=1,t.total=e.data.all_number})},handleAfter:function(){var t=this;console.log("已处理"),this.checkedStatus="已处理";this.loading=!0,this.$api.queryBadComment(this.checkedPlatform,this.checkedCountry,this.checkedSite,1,this.checkedSku,this.checkedStatus).then(function(e){console.log(e),t.badCommentList=e.data.data,t.$nextTick(function(){t.$refs.ncTable.bodyWrapper.scrollTop=0}),t.loading=!1,t.currentPage=1,t.total=e.data.all_number})},handleAll:function(){var t=this;console.log("全部");this.checkedStatus="",this.loading=!0,this.$api.queryBadComment(this.checkedPlatform,this.checkedCountry,this.checkedSite,1,this.checkedSku).then(function(e){console.log(e),t.badCommentList=t.$utils.deepClone(e.data.data),t.badCommentList=t.badCommetListSort(t.badCommentList),t.$nextTick(function(){t.$refs.ncTable.bodyWrapper.scrollTop=0}),t.loading=!1,t.currentPage=1,t.total=e.data.all_number})},goHandle:function(t){var e=this;[].push(t[2],t[1],t[3],t[7]),this.$confirm("确定差评已消除了吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.changeStatus(idList,"已处理").then(function(t){console.log(t),e.$message.success("处理成功");e.loading=!0,e.$api.queryBadComment(e.checkedPlatform,e.checkedCountry,e.checkedSite,1,e.checkedSku,e.changeStatus).then(function(t){e.badCommentList=e.$utils.deepClone(t.data.data),e.badCommentList=e.badCommetListSort(e.badCommentList),e.loading=!1,e.currentPage=1,e.total=t.data.all_number})})}).catch(function(){e.$message({type:"info",message:"已取消回复"})})},beforeUpload:function(t){console.log(t),this.fileData.push(t),this.file=t},uploadFile:function(t){},handleRemove:function(t,e){},indexMethod:function(t){return t+1+50*(this.currentPage-1)},handleCurrentChange:function(t){var e=this;console.log(t),this.loading=!0,this.$api.queryBadComment(this.checkedPlatform,this.checkedCountry,this.checkedSite,t,this.checkedSku,this.checkedStatus).then(function(t){console.log(t),e.badCommentList=t.data.data,e.$nextTick(function(){e.$refs.ncTable.bodyWrapper.scrollTop=0}),e.loading=!1,e.total=t.data.all_number})},exportExcel:function(){var t=this,e=[],n=!0,a=!1,l=void 0;try{for(var o,s=i()(this.selection);!(n=(o=s.next()).done);n=!0){var c=o.value;console.log(this.selection);var r=[];r.push(c[2],c[1],c[3],c[8]),e.push(r)}}catch(t){a=!0,l=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw l}}if(console.log(e),0===this.selection.length)return this.$confirm("你并没有勾选数据哟, 还要导出Excel吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$utils.export2Excel(t.headData,t.selection)}).catch(function(){});this.$api.changeStatus(e,"处理中").then(function(e){console.log(e);t.loading=!0,t.$api.queryBadComment(t.checkedPlatform,t.checkedCountry,t.checkedSite,1,t.checkedSku,t.changeStatus).then(function(e){t.badCommentList=e.data.data,t.badCommentList=t.badCommetListSort(t.badCommentList),t.loading=!1,t.currentPage=1,t.total=e.data.all_number})}),this.$utils.export2Excel(this.headData,this.selection)},handleSelectionChange:function(t){this.selectNum=t.length,this.selection=t,console.log(this.selection,this.selectNum)}},created:function(){this.getMenuList()},mounted:function(){}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"ipi-board"}},[n("div",{staticClass:"left"},[t._m(0),t._v(" "),n("div",{staticClass:"left-content"},[n("h3",[t._v("请选择店铺")]),t._v(" "),n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"unique-opened":"","default-active":"0-0-0"}},t._l(t.menuPlatFormList,function(e,a){return n("el-submenu",{key:a,attrs:{index:a+""}},[n("template",{slot:"title"},[n("span",{staticStyle:{display:"inline-block",width:"100%"},on:{click:function(e){return t.onceClick(a)}}},[t._v(t._s(e))])]),t._v(" "),t._l(t.showCountryList,function(i,l){return n("el-submenu",{key:l,attrs:{index:a+"-"+l}},[n("template",{slot:"title"},[n("span",{staticStyle:{display:"inline-block",width:"100%"},on:{click:function(e){return t.secondClick(l)}}},[t._v(t._s(i))])]),t._v(" "),t._l(t.lastSiteList,function(o,s){return n("el-menu-item",{key:s,attrs:{index:a+"-"+l+"-"+s},on:{click:function(n){return t.thirdClick(e,i,o)}}},[n("span",[t._v(t._s(o))])])})],2)})],2)}),1)],1)]),t._v(" "),n("div",{staticClass:"right"},[n("span",[t._v("差评维护")]),t._v(" "),n("div",{staticClass:"button"},[n("span",[t._v("按sku筛选：")]),t._v(" "),n("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},on:{change:t.skuChange},model:{value:t.checkedSku,callback:function(e){t.checkedSku=e},expression:"checkedSku"}},t._l(t.skuList,function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})}),1),t._v(" "),n("el-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"primary",size:"mini"},on:{click:t.handleAll}},[t._v("全部")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleBefore}},[t._v("未处理")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handling}},[t._v("处理中")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleAfter}},[t._v("已处理")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.exportExcel}},[t._v("导出Excel")])],1),t._v(" "),n("div",{staticClass:"table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"ncTable",staticStyle:{width:"100%"},attrs:{data:t.badCommentList,border:"","max-height":"700","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"0",label:"渠道"}}),t._v(" "),n("el-table-column",{attrs:{prop:"1",label:"站点",width:"70"}}),t._v(" "),n("el-table-column",{attrs:{prop:"2",label:"国家",width:"70"}}),t._v(" "),n("af-table-column",{attrs:{prop:"3",label:"sku"}}),t._v(" "),n("el-table-column",{attrs:{prop:"4",label:"ASIN"}}),t._v(" "),n("el-table-column",{attrs:{prop:"5",label:"抓取时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"6",label:"客户名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"7",label:"星级",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"8",label:"评论发布时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"9",label:"前台链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-link",{attrs:{href:e.row[9],target:"_blank",type:"success"}},[t._v("点我跳转")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"10",label:"客户评论链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-link",{attrs:{href:e.row[10],target:"_blank",type:"success"}},[t._v("点我跳转")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"11",label:"处理情况"},scopedSlots:t._u([{key:"default",fn:function(e){return["处理中"!==e.row[11]?n("span",[t._v(t._s(e.row[11]))]):n("el-link",{attrs:{type:"danger"},on:{click:function(n){return t.goHandle(e.row)}}},[t._v(t._s(e.row[11]))])]}}])}),t._v(" "),n("af-table-column",{attrs:{prop:"12",label:"处理时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"13",label:"处理人"}})],1),t._v(" "),n("el-pagination",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total,prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h2",{staticStyle:{"text-align":"center"}},[this._v("页面维护-首页无差评")])])}]};var r=n("VU/8")(s,c,!1,function(t){n("qlQ9")},"data-v-9a6365ce",null);e.default=r.exports},qlQ9:function(t,e){}});
//# sourceMappingURL=74.7852631678f028e60eaf.js.map