webpackJsonp([11],{"+cxx":function(t,e){},"K/zy":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),l={props:["hTitle","hTip","imgSrc","index","submitflag"],data:function(){return{file:"",fileList:[],canUpload:!1,formData:null,acceptTypes:["image/png","image/jpeg","image/gif","image/jpg"]}},computed:{url:function(){return this._url2+"server/order_management/upload_template/"}},methods:{submitFiles:function(){console.log(提交)},uploadfile:function(t){this.canUpload=!0,this.formData.append("file",t.file),console.log(this.index)},checkType:function(t){console.log(t),t.type&&-1===this.acceptTypes.indexOf(t.type)&&alert("请上传图片类型！")},removefile:function(t,e){e.length||(this.canUpload=!1)},uploadSubmit:function(){var t=this;if(this.formData=new FormData,this.$refs.upload.submit(),this.canUpload){var e=this.$parent.$parent.formData,a=this.$parent.$parent.sku,i=void 0;switch(this.index){case 0:i="step_one";break;case 1:i="step_two";break;case 2:i="step_three";break;case 3:i="step_four";break;case 4:i="step_five"}e.country&&e.store&&"all"!==e.country&&"all"!==e.store&&a&&this.formData?(this.formData.append("station",e.store),this.formData.append("country",e.country),this.formData.append("sku",a),this.formData.append("step",i),this.$axios.post(this.url,this.formData).then(function(e){console.log(e),t.$emit("upload",index)})):alert("请检查是否选择国家，站点，sku及上传文件")}else alert("请选择文件或确认上传！")},enlarge:function(t){console.log(t),this.$emit("enlargeImg",t)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stepCard"},[a("h3",[t._v(t._s(t.hTitle))]),t._v(" "),t.hTip?a("p",[t._v(t._s(t.hTip))]):t._e(),t._v(" "),t.imgSrc.length?a("div",t._l(t.imgSrc,function(e,i){return a("img",{key:i,attrs:{src:"/static/images/"+e,alt:""},on:{click:function(a){return t.enlarge(e)}}})}),0):t._e(),t._v(" "),a("div",{staticClass:"confirm"},[a("el-upload",{ref:"upload",attrs:{"on-remove":t.removefile,"file-list":t.fileList,drag:"",accept:"image/png, image/jpeg, image/gif, image/jpg",action:t.url,multiple:"","before-upload":t.checkType,"http-request":t.uploadfile,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传图片文件")])]),t._v(" "),a("div",[a("button",{staticClass:"confirmBtn",on:{click:t.uploadSubmit}},[t._v("确认上传")])])],1)])},staticRenderFns:[]};var n={props:["allStepData"],data:function(){return{uploadImg:"",showDialog:!1,idx:"",count:[],bigSrc:"",showFinal:!1,finalCommit:!1}},computed:{steplist:function(){var t=s()(this.allStepData);return JSON.parse(t)}},methods:{uploadflag:function(t){-1===this.count.indexOf(t)&&this.count.push(t)},showNotice:function(t){this.showDialog=!0,this.bigSrc=t},uploadFile:function(){var t=this,e=this.$refs.tem_input.files;(e=[].slice.call(e)).forEach(function(e){e.type&&-1===t.acceptTypes.indexOf(e.type)&&alert("请上传图片类型！")}),this.steplist[this.idx].submitflag=!0},submitImg:function(){-1===this.count.indexOf(this.idx)&&this.count.push(this.idx),this.$emit("finalcheck",this.count),this.showDialog=!1,this.$refs.tem_input.value=""},finallcheck:function(){this.count.length===this.steplist.length?this.showFinal=!0:alert("未上传全部图片,请检查！")},gotIt:function(){console.log(1),this.showFinal=!1}},components:{StepCard:a("VU/8")(l,o,!1,function(t){a("zmaA")},"data-v-4ed2402d",null).exports}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fbm_template"},[a("h2",[t._v(t._s(t.steplist.h2title))]),t._v(" "),t._l(t.steplist.others,function(e,i){return a("StepCard",{key:i,attrs:{hTitle:e.hTitle,hTip:e.hTip,imgSrc:e.imgSrc,index:i,submitflag:e.submitflag},on:{upload:t.uploadflag,enlargeImg:t.showNotice}})}),t._v(" "),a("div",[a("button",{staticClass:"finallcheck",on:{click:t.finallcheck}},[t._v("确认修改完成")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFinal,expression:"showFinal"}],staticClass:"mask"},[a("div",{staticClass:"showFinal"},[a("p",[t._v("别忘了核对前台配送时效哦！")]),t._v(" "),a("button",{staticClass:"submit",on:{click:t.gotIt}},[t._v("确认完成")])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDialog,expression:"showDialog"}],staticClass:"notice_dialog",style:{"z-index":t.showDialog?"1":"-999"}},[a("img",{attrs:{src:"/static/images/"+t.bigSrc,alt:""}}),t._v(" "),a("span",{staticClass:"closeDialog",on:{click:function(e){t.showDialog=!1}}},[t._v("X")])])],2)},staticRenderFns:[]};var c={data:function(){return{formData:{store:"all",country:"all"},formData2:{changereason:"",temtype:""},stores:[],countries:[],due_skus:[],skuData:[],sku:"",curIdx:0,changereason:"",temtype:"",comName:"",showFinal:!1,finalCommit:!1,allstepdata:{h2title:"（自动化，加急，隔日达，当天达 + 1天备货时间）",others:[{hTitle:"1、设置仓库",hTip:"点击设置-配送设置-一般配送设置-编辑-添加新地址，填写仓库地址。美西仓库地址：5201 Cliffwood Dr, Montclair,CA 91763, CLIFFWOOD, CA, 91763, 美国",imgSrc:["mxc_step1.png"],uploadUrl:"xxx"},{hTitle:"2、配送模板",hTip:"创建新配送模板并命名",imgSrc:["mxc_step2.png"],uploadUrl:"yyy"},{hTitle:"3、设置模板",hTip:"选择美西仓库-下一步-选择承运人配送服务（此处为FedEx配送）",imgSrc:["mxc_step3_1.png","mxc_step3_2.png"],uploadUrl:"zzz"},{hTitle:"4、下一步-完成",hTip:"勾选自动化，标准运输时间，设置为2-4天，偏远地区为5-8天，且运费为4.99，每磅0.99刀",imgSrc:["mxc_step4_1.png"],uploadUrl:"mmm"},{hTitle:"5、库存-商品页面-选择相应的配送模板-报价-处理时间-1天",hTip:"",imgSrc:["mxc_step4_1.png","mxc_step4_2.png"],uploadUrl:"mmm"}]},mxc_yc:{h2title:"（关闭自动化，关闭加急，关闭隔日达，关闭当天送达 + 5天备货时间）",others:[{hTitle:"1、创建新配送模板并命名",hTip:"",imgSrc:["mxc_yc_step1.png"],uploadUrl:"xxx"},{hTitle:"2、设置模板",hTip:"选择美西仓库-下一步-选择承运人配送服务（此处为FedEx配送）",imgSrc:["mxc_yc_step2_1.png","mxc_yc_step2_2.png"],uploadUrl:"yyy"},{hTitle:"3、关闭自动化，关闭加急，关闭隔日达，关闭当天送达",hTip:"",imgSrc:["mxc_yc_step3.png"],uploadUrl:"zzz"},{hTitle:"4、改时间运输时间，普通为5-8天，偏远地区7-14天，且运费为4.99，每磅0.99刀",hTip:"",imgSrc:["mxc_yc_step4.png"],uploadUrl:"mmm"},{hTitle:"5、库存-商品页面-选择相应的配送模板-报价-处理时间-5天",hTip:"",imgSrc:["mxc_yc_step5.png"],uploadUrl:"mmm"}]},mdc:{h2title:"（自动化，加急，隔日达，当天达 + 1天备货时间）",others:[{hTitle:"1、设置仓库",hTip:"点击设置-配送设置-一般配送设置-编辑-添加新地址，填写仓库地址 美东仓库地址：12 McCullough Dr New Castle，DE 19720,New Castle, DE, 19720, 美国",imgSrc:["mdc_step1.png"],uploadUrl:"xxx"},{hTitle:"2、配送模板",hTip:"创建新配送模板并命名",imgSrc:["mdc_step2.png"],uploadUrl:"yyy"},{hTitle:"3、设置模板",hTip:"选择美东仓库-下一步-选择承运人配送服务（此处为FedEx配送）",imgSrc:["mdc_step3_1.png","mdc_step3_2.png"],uploadUrl:"zzz"},{hTitle:"4.下一步-完成",hTip:"勾选自动化，标准运输时间，设置为2-4天，偏远地区为5-8天，且运费为4.99，每磅0.99刀",imgSrc:["mdc_step4_1.png","mdc_step4_2.png"],uploadUrl:"mmm"},{hTitle:"5、库存-商品页面-选择相应的配送模板-报价-处理时间-1天",hTip:"",imgSrc:["mdc_step5.png"],uploadUrl:"mmm"}]},mdc_yc:{h2title:"（关闭自动化，关闭加急，关闭隔日达，关闭当天送达 + 5天备货时间）",others:[{hTitle:"1、创建新配送模板并命名",hTip:"",imgSrc:["mdc_yc_step1.png"],uploadUrl:"xxx"},{hTitle:"2、设置模板",hTip:"选择美东仓库-下一步-选择承运人配送服务（此处为FedEx配送）",imgSrc:["mdc_yc_step2_1.png","mdc_yc_step2_2.png"],uploadUrl:"yyy"},{hTitle:"3、关闭自动化，关闭加急，关闭隔日达，关闭当天送达",hTip:"",imgSrc:["mdc_yc_step3.png"],uploadUrl:"zzz"},{hTitle:"4、改时间运输时间，普通为5-8天，偏远地区7-14天，且运费为4.99，每磅0.99刀",hTip:"",imgSrc:["mdc_yc_step4.png"],uploadUrl:"mmm"},{hTitle:"5、库存-商品页面-选择相应的配送模板-报价-处理时间-5天",hTip:"",imgSrc:["mdc_yc_step5.png"],uploadUrl:"mmm"}]}}},methods:{go_route:function(t){this.$router.push(t)},showSkuTem:function(t){this.curIdx=t,this.sku=this.due_skus[t]},finallcheck:function(){this.finalCommit?(this.showFinal=!0,this.due_skus.splice(this.curIdx,1)):alert("未上传全部图片,请检查！")},gotIt:function(){this.showFinal=!1},checkAllUpload:function(t){this.allstepdata.length===t.length&&(this.finalCommit=!0)},changeOpt:function(t){var e=this;if("country"===t){if(this.formData2.changereason="",this.formData2.temtype="",this.formData.store="all",this.stores=[],this.due_skus=[],"all"!==this.formData.country){var a=this._url2+"server/personnel_management/get_sign_area/";this.$axios.get(a,{params:{country:this.formData.country}}).then(function(t){e.stores=t.data.data})}}else if("store"===t&&(this.due_skus=[],"all"!==this.formData.country&&this.formData.store&&"all"!==this.formData.store)){var i=this.skuData.find(function(t){return t.station===e.formData.store&&t.country===e.formData.country});if(!i)return;i.skus.forEach(function(t){e.due_skus.push(t.sku)}),this.sku=this.due_skus[0],this.formData2.changereason=i.skus[0].change_reason,this.formData2.temtype=i.skus[0].template_type,this.mdc=this.mdc_yc}}},created:function(){var t=this;this.$axios.get(this._url2+"server/order_management/get_template_data/").then(function(e){t.skuData=e.data.data1});this.$axios.get(this._url2+"server/personnel_management/get_sign_country/").then(function(e){t.countries=e.data.data})},components:{FbmTemplate:a("VU/8")(n,r,!1,function(t){a("+cxx")},"data-v-b13f6030",null).exports}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deliverytemplate"},[a("div",{staticClass:"leftmenu"},[a("h3",[t._v("待处理sku")]),t._v(" "),a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formData}},[a("el-form-item",{attrs:{label:"国家"}},[a("el-select",{attrs:{placeholder:"请选择国家"},on:{change:function(e){return t.changeOpt("country")}},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}},[a("el-option",{attrs:{value:"all",label:"全部"}}),t._v(" "),t._l(t.countries,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"站点"}},[a("el-select",{attrs:{placeholder:"请选择站点"},on:{change:function(e){return t.changeOpt("store")}},model:{value:t.formData.store,callback:function(e){t.$set(t.formData,"store",e)},expression:"formData.store"}},[a("el-option",{attrs:{value:"all",label:"全部"}}),t._v(" "),t._l(t.stores,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})],2)],1)],1),t._v(" "),a("ul",t._l(t.due_skus,function(e,i){return a("li",{key:i,class:{active:t.curIdx===i}},[a("a",{on:{click:function(e){return t.showSkuTem(i)}}},[t._v(t._s(e))])])}),0)],1)]),t._v(" "),a("div",{staticClass:"rightcon"},[a("el-form",{attrs:{inline:!0,model:t.formData2}},[a("el-form-item",{attrs:{label:"更改原因"}},[a("el-input",{attrs:{disabled:""},model:{value:t.formData2.changereason,callback:function(e){t.$set(t.formData2,"changereason",e)},expression:"formData2.changereason"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板类型"}},[a("el-input",{attrs:{disabled:""},model:{value:t.formData2.temtype,callback:function(e){t.$set(t.formData2,"temtype",e)},expression:"formData2.temtype"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.go_route("/SupervisorPage")}}},[t._v("操作记录")])],1)],1),t._v(" "),a("div",[a("FbmTemplate",{attrs:{allStepData:t.mdc},on:{finalcheck:t.checkAllUpload}})],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(c,p,!1,function(t){a("h+7m"),a("SSdf")},null,null);e.default=u.exports},SSdf:function(t,e){},"h+7m":function(t,e){},zmaA:function(t,e){}});
//# sourceMappingURL=11.74864ad2a7945cedaf3c.js.map