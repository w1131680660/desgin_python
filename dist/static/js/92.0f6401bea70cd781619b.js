webpackJsonp([92],{ari5:function(t,e){},xJOz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("BO1k"),o=i.n(s),l={name:"",props:{},components:{},data:function(){return{textDocList:[],selectNum:0,selection:[],addTextData:[],shopList:[],addTextDialogVisible:!1,addTextForm:{platform:"",site:"",country:"",sku:"",title:"",fivePoint:""},editTextDialogVisible:!1,editTextForm:{platform:"",site:"",country:"",sku:"",title:"",fivePoint:"",id:""},formRules:{platform:[{required:!0,message:"请选择平台",trigger:"change"}],site:[{required:!0,message:"请选择站点",trigger:"change"}],country:[{required:!0,message:"请选择国家",trigger:"change"}],sku:[{required:!0,message:"请选择sku",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],fivePoint:[{required:!0,message:"请输入五点描述",trigger:"blur"}]},countryList:[],platformList:["Amazon"],siteList:[],skuList:[],selectPlatform:"",selectCountry:"",selectSite:"",menuPlatFormList:[],menuCountryList:[],menuSiteList:[],showCountryList:[],showSiteList:[],lastSiteList:[],checkedPlatform:"",checkedCountry:"",checkedSite:"",currentPage:1,total:0,pageSize:50}},computed:{},watch:{},methods:{getMenuList:function(){var t=this;this.$api.getMenuList().then(function(e){t.menuPlatFormList=e.data.data1,t.menuCountryList=e.data.data2,t.menuSiteList=e.data.data3,t.showCountryList=t.menuCountryList[0],t.showSiteList=t.menuSiteList[0],t.lastSiteList=t.showSiteList[0],t.checkedPlatform=t.menuPlatFormList[0],t.checkedCountry=t.showCountryList[0],t.checkedSite=t.lastSiteList[0],t.thirdClick(t.checkedPlatform,t.checkedCountry,t.checkedSite)})},getTextSelectList:function(){var t=this;this.$api.getTextSelectList({}).then(function(e){console.log(e),t.countryList=e.data.country_list,t.platformList=e.data.platform_list,t.siteList=e.data.site_list,t.skuList=e.data.sku_list})},handleSelectionChange:function(t){this.selectNum=t.length,this.selection=t},removeTextDoc:function(){var t=this;if(0==this.selectNum)return this.$message.closeAll(),this.$message.info("请选择商品");var e=[],i=!0,s=!1,l=void 0;try{for(var a,n=o()(this.selection);!(i=(a=n.next()).done);i=!0){var r=a.value;e.push(r[0])}}catch(t){s=!0,l=t}finally{try{!i&&n.return&&n.return()}finally{if(s)throw l}}console.log(e),this.$confirm("此操作将永久删除这些记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteText(e).then(function(e){console.log(e),t.thirdClick(t.checkedPlatform,t.checkedCountry,t.checkedSite),t.$message.success("删除成功")})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addTextDoc:function(){this.addTextDialogVisible=!0},editTextDoc:function(){return 0==this.selectNum?(this.$message.closeAll(),this.$message.info("请选择商品")):this.selectNum>1?(this.$message.closeAll(),this.$message.info("一次只允许编辑一个")):(this.editTextForm.site=this.selection[0][1],this.editTextForm.country=this.selection[0][2],this.editTextForm.sku=this.selection[0][3],this.editTextForm.id=this.selection[0][0],this.editTextForm.title=this.selection[0][4],this.editTextForm.fivePoint=this.selection[0][5],void(this.editTextDialogVisible=!0))},addTextConfirm:function(){var t=this;this.$refs.addTextRef.validate(function(e){if(e){var i=new FormData;i.append("platform",t.addTextForm.platform),i.append("country",t.addTextForm.country),i.append("site",t.addTextForm.site),i.append("sku",t.addTextForm.sku),i.append("title",t.addTextForm.title),i.append("describe",t.addTextForm.fivePoint),t.$api.addText(i).then(function(e){console.log(e),t.$message.success("新增成功"),t.thirdClick(t.checkedPlatform,t.checkedCountry,t.checkedSite),t.addTextDialogVisible=!1})}})},editTextConfirm:function(){var t=this;this.$refs.editTextRef.validate(function(e){if(e){var i=new FormData;i.append("text_id",t.editTextForm.id),i.append("title",t.editTextForm.title),i.append("describe",t.editTextForm.fivePoint),t.$api.editText(i).then(function(e){console.log(e),t.thirdClick(t.checkedPlatform,t.checkedCountry,t.checkedSite),t.editTextDialogVisible=!1,t.$message.success("编辑成功")})}})},onceClick:function(t){this.showCountryList=[],this.showSiteList=[],this.showCountryList=this.menuCountryList[t],this.showSiteList=this.menuSiteList[t]},secondClick:function(t){this.lastSiteList=[],this.lastSiteList=this.showSiteList[t]},thirdClick:function(t,e,i){var s=this;this.stockCalculationList=[],this.checkedPlatform=t,this.checkedCountry=e,this.checkedSite=i;var o={platform:t,country:e,site:i,page:1};this.$api.textQueryInfo(o).then(function(t){console.log(t),s.textDocList=t.data.data})},addTextDialogClose:function(){this.$refs.addTextRef.resetFields()},editTextDialogClose:function(){this.$refs.editTextRef.resetFields()},countrySelectChange:function(t){var e=this;console.log(t),this.selectCountry=t,this.$api.getSiteList(t).then(function(t){console.log(t),e.siteList=t.data.data})},siteSelectChange:function(t){var e=this;this.selectSite=t,console.log(t),this.$api.getTextSelectList(this.selectPlatform,this.selectCountry,this.selectSite).then(function(t){console.log(t),e.skuList=t.data.sku_list})},textRowClick:function(t){this.$refs.textDocRef.toggleRowSelection(t)},handleCurrentChange:function(t){var e=this;console.log(t);var i={platform:this.checkedPlatform,country:this.checkedCountry,site:this.checkedSite,page:t};this.$api.textQueryInfo(i).then(function(t){console.log(t),e.textDocList=t.data.data})},getCountryList:function(){var t=this;this.$api.getCountryList().then(function(e){console.log(e),t.countryList=e.data.data})}},created:function(){this.getMenuList(),this.getCountryList()},mounted:function(){}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"text-document"}},[i("div",{staticClass:"left"},[t._m(0),t._v(" "),i("div",{staticClass:"left-content"},[i("h3",[t._v("请选择店铺：")]),t._v(" "),i("div",{staticClass:"shop-list"},[i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"0-0-0","unique-opened":""}},t._l(t.menuPlatFormList,function(e,s){return i("el-submenu",{key:s,attrs:{index:s+""}},[i("template",{slot:"title"},[i("span",{staticStyle:{display:"inline-block",width:"100%"},on:{click:function(e){return t.onceClick(s)}}},[t._v(t._s(e))])]),t._v(" "),t._l(t.showCountryList,function(o,l){return i("el-submenu",{key:l,attrs:{index:s+"-"+l}},[i("template",{slot:"title"},[i("span",{staticStyle:{display:"inline-block",width:"100%"},on:{click:function(e){return t.secondClick(l)}}},[t._v(t._s(o))])]),t._v(" "),t._l(t.lastSiteList,function(a,n){return i("el-menu-item",{key:n,attrs:{index:s+"-"+l+"-"+n},on:{click:function(i){return t.thirdClick(e,o,a)}}},[i("span",[t._v(t._s(a))])])})],2)})],2)}),1)],1)])]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"info"},[i("span",[t._v("站点："+t._s(t.checkedSite))]),t._v(" "),i("span",[t._v("国家："+t._s(t.checkedCountry))])]),t._v(" "),i("div",{staticClass:"table"},[i("div",{staticClass:"button"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addTextDoc}},[t._v("新增")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.editTextDoc}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeTextDoc}},[t._v("删除")])],1),t._v(" "),i("el-table",{ref:"textDocRef",staticStyle:{width:"100%"},attrs:{data:t.textDocList,border:"","max-height":"700"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection"}}),t._v(" "),i("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),t._v(" "),i("el-table-column",{attrs:{prop:"1",label:"站点",width:"70"}}),t._v(" "),i("el-table-column",{attrs:{prop:"2",label:"国家",width:"70"}}),t._v(" "),i("el-table-column",{attrs:{prop:"3",label:"sku",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"4",label:"标题"}}),t._v(" "),i("el-table-column",{attrs:{prop:"5",label:"五点描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-popover",{attrs:{placement:"top",width:"400",trigger:"click",content:e.row[5]}},[i("span",{staticClass:"five-point",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row[5]))])])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)]),t._v(" "),i("el-dialog",{attrs:{title:"新增文字文档",visible:t.addTextDialogVisible,width:"50%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.addTextDialogVisible=e},close:t.addTextDialogClose}},[i("el-form",{ref:"addTextRef",attrs:{model:t.addTextForm,rules:t.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"平台",prop:"platform"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addTextForm.platform,callback:function(e){t.$set(t.addTextForm,"platform",e)},expression:"addTextForm.platform"}},t._l(t.platformList,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"国家",prop:"country"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.countrySelectChange},model:{value:t.addTextForm.country,callback:function(e){t.$set(t.addTextForm,"country",e)},expression:"addTextForm.country"}},t._l(t.countryList,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"站点",prop:"site"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.siteSelectChange},model:{value:t.addTextForm.site,callback:function(e){t.$set(t.addTextForm,"site",e)},expression:"addTextForm.site"}},t._l(t.siteList,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"sku",prop:"sku"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addTextForm.sku,callback:function(e){t.$set(t.addTextForm,"sku",e)},expression:"addTextForm.sku"}},t._l(t.skuList,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.addTextForm.title,callback:function(e){t.$set(t.addTextForm,"title",e)},expression:"addTextForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"五点描述",prop:"fivePoint"}},[i("el-input",{attrs:{type:"textarea",rows:12},model:{value:t.addTextForm.fivePoint,callback:function(e){t.$set(t.addTextForm,"fivePoint",e)},expression:"addTextForm.fivePoint"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addTextDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.addTextConfirm}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"编辑文字文档",visible:t.editTextDialogVisible,width:"50%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.editTextDialogVisible=e},close:t.editTextDialogClose}},[i("el-form",{ref:"editTextRef",attrs:{model:t.editTextForm,rules:t.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"站点"}},[i("el-input",{attrs:{readonly:""},model:{value:t.editTextForm.site,callback:function(e){t.$set(t.editTextForm,"site",e)},expression:"editTextForm.site"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"国家"}},[i("el-input",{attrs:{readonly:""},model:{value:t.editTextForm.country,callback:function(e){t.$set(t.editTextForm,"country",e)},expression:"editTextForm.country"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"sku"}},[i("el-input",{attrs:{readonly:""},model:{value:t.editTextForm.sku,callback:function(e){t.$set(t.editTextForm,"sku",e)},expression:"editTextForm.sku"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.editTextForm.title,callback:function(e){t.$set(t.editTextForm,"title",e)},expression:"editTextForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"五点描述",prop:"fivePoint"}},[i("el-input",{attrs:{type:"textarea",rows:12},model:{value:t.editTextForm.fivePoint,callback:function(e){t.$set(t.editTextForm,"fivePoint",e)},expression:"editTextForm.fivePoint"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editTextDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.editTextConfirm}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h2",{staticStyle:{"text-align":"center"}},[this._v("文字文档")])])}]};var n=i("VU/8")(l,a,!1,function(t){i("ari5")},"data-v-32865d2c",null);e.default=n.exports}});
//# sourceMappingURL=92.0f6401bea70cd781619b.js.map