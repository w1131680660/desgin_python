webpackJsonp([15],{Ld0z:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{columnWidth:"",submitFlag1:!1,submitFlag2:!1,addressTips:"",addressTips2:"",tableData:[{order_id:"",country_code:"",station:"",reason:""}],dialogVisible:!1,dialogVisible1:!1,receive_countries:["美国","日本"],ship_one_form:{order_id:"",country_code:"",city:"",address:"",name:"",tel:"",zip_code:""},rules:{number:[{required:!0,message:"请输入订单编号",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],receive_name:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}],tel:[{required:!0,message:"请输入电话",trigger:"blur"}],postcode:[{required:!0,message:"请输入邮编",trigger:"blur"}],doorplate:[{required:!0,message:"请输入门牌号",trigger:"blur"}]},ship_one_form1:{order_id:"",country_code:"",city:"",address:"",address2:"",name:"",tel:"",zip_code:"",doorplate:"",true_site:""},dialogVisible2:!1,ship_one_form2:{order_id:"",number:""},rules1:{number:[{required:!0,message:"请输入海外仓订单编号",trigger:"blur"}]},repair_order_id:"",formData1:null,formData2:null,loading:!1,dialogWidth:"0",files:"",reasonVisible:!1,reason:""}},props:["type"],computed:{clientWidth:function(){return this.$store.state.clientWidth}},watch:{clientWidth:function(e){console.log("监听",e),this.columnWidth=e<480||480==e?"40":""}},mounted:function(){var e=this;this.get_data(),this.initDialogWidth(),this.setColumnWidth(),window.onresize=this.$utils.throttle(function(){e.setDialogWidth(),e.setColumnWidth()},600)},methods:{splitUrl:function(e){return e.replace("/home/by_operate/","")},exportNoReturn:function(){var e=this,t=this._url2+"server/order_management/no_deliver_order_data/";this.$axios.get(t).then(function(t){console.log(t);var o=t.data.data;if(o){var i=e.splitUrl(o);console.log(i);var r=document.createElement("a");r.setAttribute("href",e._url2+i),document.body.appendChild(r),r.click()}else e.$message.warning("暂无数据可供下载")})},setColumnWidth:function(){var e=document.body.clientWidth;this.columnWidth=e<480||480==e?"40":""},submitRemark:function(e){var t=this;console.log(e);var o=this._url2+"server/order_management/err_order_remark/";this.$axios.get(o,{params:{remark:e.remark,order_id:e.order_id}}).then(function(e){200===e.data.code?t.$message.success("请求成功"):t.message.warning("请求未成功")})},sku_control:function(){this.$router.push("/SkuControl")},setDialogWidth:function(){console.log(document.body.clientWidth);var e=document.body.clientWidth;this.dialogWidth=e<800?"100%":"800px"},initDialogWidth:function(){var e=document.body.clientWidth;this.dialogWidth=e<992?"100%":"60%"},singleShip:function(){this.dialogVisible=!0},handleClose1:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("验证通过，发起请求！"),t.dialogVisible=!1;var o=new FormData;o.append("order_id",t.ship_one_form.order_id),o.append("country_code",t.ship_one_form.country_code),o.append("city",t.ship_one_form.city),o.append("address",t.ship_one_form.address),o.append("name",t.ship_one_form.name),o.append("tel",t.ship_one_form.tel),o.append("zip_code",t.ship_one_form.zip_code),console.log(t.ship_one_form),t.$axios.post(t._url2+"server/order_management/single_order_deliver/",o).then(function(e){console.log("编辑数据提交",e.data),200===e.data.code?(alert(e.data.msg),window.location.reload()):alert(e.data.msg)})})},onSubmit1:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("重新发货！"),console.log("测试地址2"),t.addressTips="",t.dialogVisible1=!1;var o=new FormData;o.append("order_id",t.ship_one_form1.order_id),o.append("country_code",t.ship_one_form1.country_code),o.append("city",t.ship_one_form1.city),o.append("address",t.ship_one_form1.address),o.append("address2",t.ship_one_form1.address2),o.append("name",t.ship_one_form1.name),o.append("tel",t.ship_one_form1.tel),o.append("zip_code",t.ship_one_form1.zip_code),o.append("err_order","Y"),o.append("doorplate",t.ship_one_form1.doorplate),console.log(o),t.$axios.post(t._url2+"server/order_management/single_order_deliver/",o).then(function(e){console.log("编辑数据提交",e.data),200===e.data.code?(alert(e.data.msg),window.location.reload()):alert(e.data.msg)})})},changeFile1:function(){if(console.log("template"===this.type),console.log("提交",this.submitFlag1),"template"!==this.type){console.log(1);var e=this.$refs.input1.files[0];if(console.log(e.name),e.name){var t=e.name.split(".")[1];if(console.log(t),"xls"!==t&&"xlsx"!==t)return this.$refs.input1.files=null,void alert("请上传表格文件")}this.submitFlag1=!0,this.formData1=new FormData,this.formData1.append("files",e)}},changeFile2:function(){if(console.log("template"===this.type),console.log("提交",this.submitFlag2),"template"!==this.type){console.log(2);var e=this.$refs.input2.files[0];if(e.name)if("txt"!==e.name.split(".")[1])return this.$refs.input2.files=null,void alert("请上传txt文件");this.submitFlag2=!0,this.formData2=new FormData,this.formData2.append("files",e),console.log("提交",this.submitFlag2)}},submitUpload1:function(){if(console.log("提交",this.submitFlag1),"template"!==this.type&&this.submitFlag1){console.log(3);this.loading=!0,this.submitFlag1=!1,this.$axios.post(this._url2+"server/order_management/yc_batch_create_order/",this.formData1).then(function(e){e.data.code,alert(e.data.msg),window.location.reload()})}},shunfengOrder:function(){this.$router.push("/shunfengOrder")},submitUpload2:function(){if(console.log("标签",this.submitFlag2),"template"!==this.type&&this.submitFlag2){console.log(4);this.loading=!0,this.submitFlag2=!1,this.$axios.post(this._url2+"server/order_management/txt_order/",this.formData2).then(function(e){e.data.code,alert(e.data.msg),window.location.reload()})}},reShip:function(e){this.dialogVisible1=!0,console.log(e);var t=this;this.$axios.get(this._url2+"server/order_management/err_order_detail/",{params:{order_id:e}}).then(function(e){console.log(e.data),200===e.data.code?t.ship_one_form1=e.data.data[0]||{}:alert(e.data.msg)})},changeAddress:function(e){console.log(e),this.addressTips="已输入"+e.length+"个字符"},changeAddress2:function(e){console.log(e),this.addressTips2="已输入"+e.length+"个字符"},delShip:function(e){if(confirm("确定删除")){console.log(e);var t=new FormData;t.append("order_id",e),this.$axios.post(this._url2+"server/order_management/err_order_delete/",t).then(function(e){console.log(e.data),200===e.data.code?(alert("删除成功"),window.location.reload()):alert(e.data.msg)})}},get_data:function(){var e=this;this.loading=!0,this.$axios.post(this._url2+"server/order_management/err_order_select/").then(function(t){console.log(t.data),200===t.data.code?(e.tableData=t.data.data,e.loading=!1):alert(t.data.msg)})},fix_data:function(e){this.dialogVisible2=!0,this.repair_order_id=e},onSubmit2:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.dialogVisible2=!1;var o=new FormData;o.append("order_id",t.repair_order_id),o.append("order_code",t.ship_one_form2.number),t.$axios.post(t._url2+"server/order_management/repair_defeated_order/",o).then(function(e){200===e.data.code?(alert(e.data.msg),window.location.reload()):alert(e.data.msg)})})},go_long_address:function(){this.$router.push({path:"/Address_long"})},false_order:function(){this.$router.push({path:"/FalseOrder"})},canada_ship:function(){this.$router.push("/CanadaShip")},showReason:function(e){this.reason=e,this.reasonVisible=!0},reasonClose:function(){this.reason=""}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ship"},[o("div",{staticClass:"ship-button"},[o("div",{staticClass:"sku_control singleship"},[o("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:e.sku_control}},[e._v("海外仓sku对照")])],1),e._v(" "),o("div",{staticClass:"singleship"},[o("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:e.canada_ship}},[e._v("加拿大发货")])],1),e._v(" "),o("div",{staticClass:"singleship"},[o("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:e.go_long_address}},[e._v("地址超长")])],1),e._v(" "),o("div",{staticClass:"singleship"},[o("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:e.false_order}},[e._v("假回传单号查看")])],1),e._v(" "),o("div",{staticClass:"singleship"},[o("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:e.shunfengOrder}},[e._v("顺丰订单号")])],1),e._v(" "),o("div",{staticClass:"singleship"},[o("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:e.singleShip}},[e._v("单个订单发货")])],1),e._v(" "),o("div",{staticClass:"singleship downloadNoReturnOrder"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportNoReturn}},[e._v("未回传订单导出")])],1),e._v(" "),o("div",{staticClass:"firstUpload"},[o("span",{staticStyle:{"font-size":"14px"}},[e._v("易仓批量发货 ")]),e._v(" "),o("input",{ref:"input1",attrs:{type:"file",value:"文件上传",accept:".xls, .xlsx"},on:{change:e.changeFile1}}),e._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.submitUpload1}},[e._v("提交")])],1),e._v(" "),o("div",{staticClass:"secondUpload"},[o("span",{staticStyle:{"font-size":"14px"}},[e._v("易仓TXT发货 ")]),e._v(" "),o("input",{ref:"input2",attrs:{type:"file",value:"文件上传",accept:".txt"},on:{change:e.changeFile2}}),e._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.submitUpload2}},[e._v("提交")])],1)]),e._v(" "),o("div",{staticClass:"table_con"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"max-height":"750",data:e.tableData,border:"","element-loading-text":"拼命加载中,请稍等",size:"mini"}},[o("el-table-column",{attrs:{prop:"order_id",label:"订单号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"country_code",label:"国家",width:e.columnWidth}}),e._v(" "),o("el-table-column",{attrs:{prop:"station",label:"站点",width:e.columnWidth}}),e._v(" "),o("el-table-column",{attrs:{prop:"dates",label:"时间"}}),e._v(" "),o("el-table-column",{attrs:{prop:"reason",label:"失败原因"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[o("span",{staticClass:"reason",on:{click:function(t){return e.showReason(i.reason)}}},[e._v(e._s(i.reason))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"operation"},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.reShip(t.row.order_id)}}},[e._v("重新发货")]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){return e.delShip(t.row.order_id)}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(o){return e.fix_data(t.row.order_id)}}},[e._v("修复")])],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"备注",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{type:"textarea"},on:{change:function(o){return e.submitRemark(t.row)}},model:{value:t.row.remark,callback:function(o){e.$set(t.row,"remark",o)},expression:"scope.row.remark"}})]}}])})],1)],1),e._v(" "),o("div",{staticClass:"dialog"},[o("el-dialog",{attrs:{title:"重新发货",visible:e.dialogVisible1,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogVisible1=t},close:function(t){e.addressTips=""}}},[o("el-form",{ref:"ruleForm",attrs:{model:e.ship_one_form1,rules:e.rules,"label-width":"200px"}},[o("el-form-item",{attrs:{prop:"order_id",label:"请输入订单编号",required:""}},[o("el-input",{attrs:{placeholder:"请输入订单编号"},model:{value:e.ship_one_form1.order_id,callback:function(t){e.$set(e.ship_one_form1,"order_id",t)},expression:"ship_one_form1.order_id"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"请选择收件人国家",prop:"country_code"}},[o("el-input",{model:{value:e.ship_one_form1.country_code,callback:function(t){e.$set(e.ship_one_form1,"country_code",t)},expression:"ship_one_form1.country_code"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"请填写城市",prop:"city"}},[o("el-input",{attrs:{placeholder:"请填写城市"},model:{value:e.ship_one_form1.city,callback:function(t){e.$set(e.ship_one_form1,"city",t)},expression:"ship_one_form1.city"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"address",label:"请输入详细地址1",required:""}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入详细地址1"},on:{change:e.changeAddress},model:{value:e.ship_one_form1.address,callback:function(t){e.$set(e.ship_one_form1,"address",t)},expression:"ship_one_form1.address"}}),e._v(" "),o("p",{staticClass:"address_Tips"},[e._v(e._s(e.addressTips))])],1),e._v(" "),o("el-form-item",{attrs:{prop:"address2",label:"请输入详细地址2",required:""}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入详细地址2"},on:{change:e.changeAddress2},model:{value:e.ship_one_form1.address2,callback:function(t){e.$set(e.ship_one_form1,"address2",t)},expression:"ship_one_form1.address2"}}),e._v(" "),o("p",{staticClass:"address_Tips"},[e._v(e._s(e.addressTips2))])],1),e._v(" "),e.ship_one_form1.true_site?[o("el-form-item",{attrs:{prop:"true_site",label:"全部地址"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.ship_one_form1.true_site,callback:function(t){e.$set(e.ship_one_form1,"true_site",t)},expression:"ship_one_form1.true_site"}})],1)]:e._e(),e._v(" "),o("el-form-item",{attrs:{prop:"doorplate",label:"门牌号",required:""}},[o("el-input",{model:{value:e.ship_one_form1.doorplate,callback:function(t){e.$set(e.ship_one_form1,"doorplate",t)},expression:"ship_one_form1.doorplate"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"name",label:"请输入收货人姓名",required:""}},[o("el-input",{attrs:{placeholder:"请输入收货人姓名"},model:{value:e.ship_one_form1.name,callback:function(t){e.$set(e.ship_one_form1,"name",t)},expression:"ship_one_form1.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"请输入电话",required:"",prop:"tel"}},[o("el-input",{attrs:{placeholder:"请输入电话"},model:{value:e.ship_one_form1.tel,callback:function(t){e.$set(e.ship_one_form1,"tel",t)},expression:"ship_one_form1.tel"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"请输入邮编",required:"",prop:"zip_code"}},[o("el-input",{attrs:{placeholder:"请输入邮编"},model:{value:e.ship_one_form1.zip_code,callback:function(t){e.$set(e.ship_one_form1,"zip_code",t)},expression:"ship_one_form1.zip_code"}})],1),e._v(" "),o("div",{staticStyle:{width:"50%"}}),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"submitbtn",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit1("ruleForm")}}},[e._v("提交")])],1)],2)],1)],1),e._v(" "),o("div",{staticClass:"dialog"},[o("el-dialog",{attrs:{title:"单个发货",visible:e.dialogVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"ruleForm",attrs:{model:e.ship_one_form,rules:e.rules,"label-width":"200px"}},[o("el-form-item",{attrs:{prop:"number",label:"请输入订单编号",required:""}},[o("el-input",{attrs:{placeholder:"请输入订单编号"},model:{value:e.ship_one_form.number,callback:function(t){e.$set(e.ship_one_form,"number",t)},expression:"ship_one_form.number"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"请选择收件人国家"}},[o("el-input",{model:{value:e.ship_one_form.receive_country,callback:function(t){e.$set(e.ship_one_form,"receive_country",t)},expression:"ship_one_form.receive_country"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"请填写城市"}},[o("el-input",{attrs:{placeholder:"请填写城市"},model:{value:e.ship_one_form.city,callback:function(t){e.$set(e.ship_one_form,"city",t)},expression:"ship_one_form.city"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"address",label:"请输入详细地址",required:""}},[o("el-input",{staticStyle:{resize:"none"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入详细地址"},model:{value:e.ship_one_form.address,callback:function(t){e.$set(e.ship_one_form,"address",t)},expression:"ship_one_form.address"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"receive_name",label:"请输入收货人姓名",required:""}},[o("el-input",{attrs:{placeholder:"请输入收货人姓名"},model:{value:e.ship_one_form.receive_name,callback:function(t){e.$set(e.ship_one_form,"receive_name",t)},expression:"ship_one_form.receive_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"请输入电话",required:"",prop:"tel"}},[o("el-input",{attrs:{placeholder:"请输入电话"},model:{value:e.ship_one_form.tel,callback:function(t){e.$set(e.ship_one_form,"tel",t)},expression:"ship_one_form.tel"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"请输入邮编",required:"",prop:"postcode"}},[o("el-input",{attrs:{placeholder:"请输入邮编"},model:{value:e.ship_one_form.postcode,callback:function(t){e.$set(e.ship_one_form,"postcode",t)},expression:"ship_one_form.postcode"}})],1),e._v(" "),o("div",{staticStyle:{width:"50%"}}),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"submitbtn",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog"},[o("el-dialog",{attrs:{title:"修复",visible:e.dialogVisible2,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogVisible2=t}}},[o("el-form",{ref:"ruleForm",attrs:{model:e.ship_one_form2,rules:e.rules1,"label-width":"200px"}},[o("el-form-item",{attrs:{prop:"number",label:"请输入海外仓订单编号",required:""}},[o("el-input",{attrs:{placeholder:"请输入海外仓订单编号"},model:{value:e.ship_one_form2.number,callback:function(t){e.$set(e.ship_one_form2,"number",t)},expression:"ship_one_form2.number"}})],1),e._v(" "),o("div",{staticStyle:{width:"50%"}}),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"submitbtn",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit2("ruleForm")}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog"},[o("el-dialog",{attrs:{title:"失败原因详情",visible:e.reasonVisible,width:e.dialogWidth,center:""},on:{"update:visible":function(t){e.reasonVisible=t},close:e.reasonClose}},[o("div",[e._v(e._s(e.reason))]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.reasonVisible=!1}}},[e._v("关 闭")])],1)])],1)])},staticRenderFns:[]};var s=o("VU/8")(i,r,!1,function(e){o("yI2J"),o("kAYY"),o("jyH0")},"data-v-5a5bfed2",null);t.default=s.exports},jyH0:function(e,t){},kAYY:function(e,t){},yI2J:function(e,t){}});
//# sourceMappingURL=15.fd2161af896e1ebce4b8.js.map