webpackJsonp([28],{UaLt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=a("mvHQ"),n=a.n(_),i=a("BO1k"),o=a.n(i),s={name:"",props:{},data:function(){return{historyStaffList:[],selectedStaffHistory:[],empAch:[],dpmAch:[],isEdit:!1,historyDialog:{dialogVisible:!1,currentPage:1,pageSize:4,total:0,staffHistoryList:[]},dpmHistoryDialog:{dialogVisible:!1,currentPage:1,pageSize:4,total:0,dpmHistoryList:[]},editForm:[]}},computed:{},watch:{},methods:{visitAchScore:function(){var t=this;this.$api2.visitAchScore().then(function(e){console.log(e),t.empAch=e.data.data,t.dpmAch=e.data.department})},editEmpAch:function(){this.editForm=[];var t=!0,e=!1,a=void 0;try{for(var _,n=o()(this.empAch);!(t=(_=n.next()).done);t=!0){var i=_.value,s={};s.personnel_name=i.user_name,s.month_actual_performance=i.month_actual_performance,s.month_actual_money=i.month_actual_money,s.evaluate=i.evaluate,this.editForm.push(s)}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}this.isEdit=!0},noEmpAch:function(){this.isEdit=!1},baocun:function(){var t=this;this.$confirm("是否确认保存员工数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=new FormData;e.append("staff_performance_list",n()(t.editForm)),t.$api2.baocun(e).then(function(e){console.log(e),e&&(t.isEdit=!1,t.visitAchScore(),t.$message({type:"success",message:"保存成功!"}))})}).catch(function(){t.noEmpAch(),t.$message({type:"info",message:"已取消保存"})})},submit:function(){var t=this;this.$confirm("是否确认提交员工数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=new FormData;e.append("staff_performance_list",n()(t.editForm)),t.$api2.submit(e).then(function(e){console.log(e),e&&(t.isEdit=!1,t.visitAchScore(),t.$message({type:"success",message:"提交成功!"}))})}).catch(function(){t.$message({type:"info",message:"已取消保存"})})},changeStaff:function(t){console.log(t),console.log(this.historyDialog.staffHistoryList),this.selectedStaffHistory=this.historyDialog.staffHistoryList.filter(function(e){return e.id==t})},deleteList:function(){this.historyStaffList=[]},visitHistoryAch:function(){var t=this;this.$api2.staffHistoryAch().then(function(e){console.log(e),t.historyDialog.staffHistoryList=e.data.data,t.selectedStaffHistory=e.data.data,e.data.data.forEach(function(e){var a={};a.username=e.user_name,a.id=e.id,t.historyStaffList.push(a)})}),this.historyDialog.dialogVisible=!0},dpmHistory:function(){var t=this;this.$api2.dpmHistoryAch().then(function(e){console.log(e),t.dpmHistoryDialog.dpmHistoryList=e.data.data}),this.dpmHistoryDialog.dialogVisible=!0},dpmHandleSizeChange:function(t){console.log(t)},dpmHandleCurrentChange:function(t){console.log(t)},empHandleSizeChange:function(t){console.log(t)},empHandleCurrentChange:function(t){console.log(t)}},created:function(){this.visitAchScore()},mounted:function(){}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"achievement"},[a("div",{staticClass:"ach_eval"},[a("div",{staticClass:"left"},[a("div",{staticClass:"department_ach table_box"},[a("table",[t._m(0),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("部门")]),t._v(" "),a("td",[t._v(t._s(t.dpmAch.length>0?t.dpmAch[0].department:""))])]),t._v(" "),a("tr",[a("td",[t._v("绩效评定时间")]),t._v(" "),a("td",[t._v(t._s(t.dpmAch.length>0?t.dpmAch[0].evaluate_date:""))])]),t._v(" "),a("tr",[a("td",[t._v("当月绩效最高标准")]),t._v(" "),a("td",[t._v("\n                "+t._s(t.dpmAch.length>0?t.dpmAch[0].month_top_performance:"")+"\n              ")])]),t._v(" "),a("tr",[a("td",[t._v("当月最高绩效总额")]),t._v(" "),a("td",[t._v("\n                "+t._s(t.dpmAch.length>0?t.dpmAch[0].month_top_all_money:"")+"\n              ")])]),t._v(" "),a("tr",[a("td",[t._v("当月实际绩效标准")]),t._v(" "),a("td",[t._v("\n                "+t._s(t.dpmAch.length>0?t.dpmAch[0].month_actual_performance:"")+"\n              ")])]),t._v(" "),a("tr",[a("td",[t._v("当月实际绩效总额")]),t._v(" "),a("td",[t._v("\n                "+t._s(t.dpmAch.length>0?t.dpmAch[0].month_actual_all_money:"")+"\n              ")])]),t._v(" "),a("tr",[a("td",[t._v("当月部门主管绩效标准")]),t._v(" "),a("td",[t._v("\n                "+t._s(t.dpmAch.length>0?t.dpmAch[0].leader_performance_standard:"")+"\n              ")])]),t._v(" "),a("tr",[a("td",[t._v("部门主管绩效基数")]),t._v(" "),a("td",[t._v("\n                "+t._s(t.dpmAch.length>0?t.dpmAch[0].leader_performance_base:"")+"\n              ")])]),t._v(" "),a("tr",[a("td",[t._v("部门主管绩效")]),t._v(" "),a("td",[t._v("\n                "+t._s(t.dpmAch.length>0?t.dpmAch[0].leader_performance:"")+"\n              ")])]),t._v(" "),a("tr",[a("td",[t._v("其他员工绩效")]),t._v(" "),a("td",[t._v("\n                "+t._s(t.dpmAch.length>0?t.dpmAch[0].staff_all_performance:"")+"\n              ")])]),t._v(" "),a("tr",[a("td",[t._v("备注")]),t._v(" "),a("td",[t._v(t._s(t.dpmAch.length>0?t.dpmAch[0].remarks:""))])])])])]),t._v(" "),a("div",{staticClass:"dpm_history"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.dpmHistory}},[t._v("查看历史部门绩效")])],1)]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"emp_ach table_box"},[a("table",[t._m(1),t._v(" "),a("tbody",[t._m(2),t._v(" "),t._l(t.empAch,function(e,_){return a("tr",{key:_},[a("td",[t._v(t._s(_+1))]),t._v(" "),a("td",[t._v(t._s(e.personnel_id))]),t._v(" "),a("td",[t._v(t._s(e.user_name))]),t._v(" "),a("td",[t._v(t._s(e.position))]),t._v(" "),a("td",[t._v(t._s(e.base_pay))]),t._v(" "),a("td",[t._v(t._s(e.entry_date))]),t._v(" "),a("td",[t._v(t._s(e.performance_base))]),t._v(" "),a("td",[t._v(t._s(e.month_top_performance))]),t._v(" "),a("td",[t._v(t._s(e.month_top_money))]),t._v(" "),0==t.isEdit?a("td",[t._v("\n                "+t._s(e.month_actual_performance)+"\n              ")]):a("td",[a("el-input",{model:{value:t.editForm[_].month_actual_performance,callback:function(e){t.$set(t.editForm[_],"month_actual_performance",e)},expression:"editForm[index].month_actual_performance"}})],1),t._v(" "),0==t.isEdit?a("td",[t._v(t._s(e.month_actual_money))]):a("td",[a("el-input",{model:{value:t.editForm[_].month_actual_money,callback:function(e){t.$set(t.editForm[_],"month_actual_money",e)},expression:"editForm[index].month_actual_money"}})],1),t._v(" "),0==t.isEdit?a("td",[t._v(t._s(e.evaluate))]):a("td",[a("el-input",{model:{value:t.editForm[_].evaluate,callback:function(e){t.$set(t.editForm[_],"evaluate",e)},expression:"editForm[index].evaluate"}})],1)])})],2)]),t._v(" "),a("div",{staticClass:"visit_history"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.visitHistoryAch}},[t._v("查看历史员工绩效")])],1),t._v(" "),a("div",{staticClass:"operate"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),0==t.isEdit?a("el-button",{attrs:{type:"primary"},on:{click:t.editEmpAch}},[t._v("编辑")]):a("el-button",{attrs:{type:"primary"},on:{click:t.noEmpAch}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.baocun}},[t._v("保存")])],1)])])]),t._v(" "),a("el-dialog",{staticClass:"person_history",attrs:{title:"员工历史绩效",visible:t.historyDialog.dialogVisible,width:"80%",center:""},on:{close:t.deleteList,"update:visible":function(e){return t.$set(t.historyDialog,"dialogVisible",e)}}},[a("div",{staticClass:"table_box"},[a("table",[a("thead",[a("tr",[a("th",{attrs:{width:"299px"}},[t._v("绩效评定时间")]),t._v(" "),a("th",[a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.changeStaff}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                  员工姓名\n                  "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.historyStaffList,function(e,_){return a("el-dropdown-item",{key:_,attrs:{command:e.id}},[t._v(t._s(e.username))])}),1)],1)],1),t._v(" "),a("th",[t._v("职位")]),t._v(" "),a("th",[t._v("基本工资")]),t._v(" "),a("th",[t._v("绩效基数")]),t._v(" "),a("th",[t._v("当月绩效最高标准")]),t._v(" "),a("th",[t._v("当月最高绩效金额")]),t._v(" "),a("th",[t._v("当月实际绩效标准")]),t._v(" "),a("th",[t._v("当月实际绩效金额")]),t._v(" "),a("th",[t._v("评价")])])]),t._v(" "),a("tbody",t._l(t.selectedStaffHistory,function(e,_){return a("tr",{key:_},[a("td",[t._v(t._s(e.evaluate_date))]),t._v(" "),a("td",[t._v(t._s(e.user_name))]),t._v(" "),a("td",[t._v(t._s(e.position))]),t._v(" "),a("td",[t._v(t._s(e.base_pay))]),t._v(" "),a("td",[t._v(t._s(e.performance_base))]),t._v(" "),a("td",[t._v(t._s(e.month_top_performance))]),t._v(" "),a("td",[t._v(t._s(e.month_top_money))]),t._v(" "),a("td",[t._v(t._s(e.month_actual_performance))]),t._v(" "),a("td",[t._v(t._s(e.month_actual_money))]),t._v(" "),a("td",[t._v(t._s(e.evaluate))])])}),0)])])]),t._v(" "),a("el-dialog",{staticClass:"history",attrs:{title:t.dpmAch+"部门历史绩效",visible:t.dpmHistoryDialog.dialogVisible,width:"80%",center:""},on:{"update:visible":function(e){return t.$set(t.dpmHistoryDialog,"dialogVisible",e)}}},[a("div",{staticClass:"table_box"},[a("table",[a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("绩效评定时间")]),t._v(" "),a("th",[t._v("当月绩效最高标准")]),t._v(" "),a("th",[t._v("当月最高绩效总额")]),t._v(" "),a("th",[t._v("当月实际绩效标准")]),t._v(" "),a("th",[t._v("当月实际绩效总额")]),t._v(" "),a("th",[t._v("当月部门主管绩效标准")]),t._v(" "),a("th",[t._v("部门主管绩效基数")]),t._v(" "),a("th",[t._v("部门主管绩效")]),t._v(" "),a("th",[t._v("其它员工绩效")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",t._l(t.dpmHistoryDialog.dpmHistoryList,function(e,_){return a("tr",{key:_},[a("td",[t._v(t._s(_+1))]),t._v(" "),a("td",[t._v(t._s(e.evaluate_date))]),t._v(" "),a("td",[t._v(t._s(e.month_top_performance))]),t._v(" "),a("td",[t._v(t._s(e.month_top_all_money))]),t._v(" "),a("td",[t._v(t._s(e.month_actual_performance))]),t._v(" "),a("td",[t._v(t._s(e.month_actual_all_money))]),t._v(" "),a("td",[t._v(t._s(e.leader_performance_standard))]),t._v(" "),a("td",[t._v(t._s(e.leader_performance_base))]),t._v(" "),a("td",[t._v(t._s(e.leader_performance))]),t._v(" "),a("td",[t._v(t._s(e.staff_all_performance))]),t._v(" "),a("td",[t._v(t._s(e.remarks))])])}),0)])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticStyle:{width:"16vw"},attrs:{colspan:"2"}},[this._v("部门绩效")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{colspan:"12"}},[this._v("员工绩效")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("序号")]),t._v(" "),a("td",[t._v("员工编码")]),t._v(" "),a("td",[t._v("员工姓名")]),t._v(" "),a("td",[t._v("职位")]),t._v(" "),a("td",[t._v("基本工资")]),t._v(" "),a("td",[t._v("入职时间")]),t._v(" "),a("td",[t._v("绩效基数")]),t._v(" "),a("td",[t._v("当月绩效最高标准")]),t._v(" "),a("td",[t._v("当月最高绩效金额")]),t._v(" "),a("td",[t._v("当月实际绩效标准")]),t._v(" "),a("td",[t._v("当月实际绩效金额")]),t._v(" "),a("td",[t._v("评价")])])}]};var v=a("VU/8")(s,r,!1,function(t){a("ceza"),a("wAGT")},"data-v-a17e1176",null);e.default=v.exports},ceza:function(t,e){},wAGT:function(t,e){}});
//# sourceMappingURL=28.c2909ca442504328ec4d.js.map