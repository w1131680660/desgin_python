webpackJsonp([89],{"UB++":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mtWM"),s=a.n(i),n={data:function(){return{tableData:[],leftNavData:[],firstNav:"全部",twiceNav:"",threeNav:"",total:0,page:1,fastCheck:"",xAxis:[{type:"category",data:[],axisPointer:{type:"shadow"}}],series:[{name:"邮件量",type:"bar",data:[]},{name:"订单量",type:"bar",data:[]},{name:"比率",type:"line",yAxisIndex:1,data:[]}]}},methods:{getDefaultData:function(){var t=this;s()({url:this._url2+"server/customer_management/email_analysis",method:"get",params:{page:1}}).then(function(e){t.tableData=e.data.data_list,t.total=e.data.data_count[0].count/5,console.log(e,9)})},NavClick:function(t,e,a){var i=this;this.firstNav=t,this.twiceNav=e,this.threeNav=a,document.querySelector(".beginDate").value="",document.querySelector(".endDate").value="",s()({url:this._url2+"server/customer_management/email_analysis",method:"get",params:{platform:this.firstNav,country_code:this.twiceNav,site:this.threeNav,page:1}}).then(function(t){console.log(t),i.tableData=t.data.data_list,i.$nextTick(function(){$(".mailOrderTable>tbody").scrollTop(0)}),i.total=t.data.data_count[0].count/5,i.page=1,i.fastCheck="",document.querySelector(".beginDate").value="",document.querySelector(".endDate").value=""})},getChart:function(t,e,a,i){var n=this;s()({url:this._url2+"server/customer_management/email_analysis",method:"get",params:{country:t,site:e,platform:a,sku:i}}).then(function(t){console.log(t),n.xAxis[0].data=[],n.series[0].data=[],n.series[1].data=[],n.series[2].data=[];for(var e=0;e<t.data.data_list.length;e++)t.data.data_list[e].date&&(n.xAxis[0].data[e]=t.data.data_list[e].date,n.series[0].data[e]=t.data.data_list[e].email_num,n.series[1].data[e]=t.data.data_list[e].sku_num,n.series[2].data[e]=(t.data.data_list[e].email_num/t.data.data_list[e].sku_num).toFixed(2));n.getEchartData()})},getDateTable:function(){var t=this;"全部"==this.firstNav&&(this.firstNav=null);var e=document.querySelector(".beginDate").value,a=document.querySelector(".endDate").value;console.log(e,a,888),console.log(this.threeNav,this.twiceNav,this.firstNav,1),s()({url:this._url2+"server/customer_management/email_analysis",method:"get",params:{platform:this.firstNav,country_code:this.twiceNav,site:this.threeNav,page:1,begin_date:e,over_date:a}}).then(function(e){console.log(e),t.tableData=e.data.data_list,t.$nextTick(function(){$(".mailOrderTable>tbody").scrollTop(0)}),t.total=e.data.data_count[0].count/5,t.page=1,t.fastCheck=""}),null==this.firstNav&&(this.firstNav="全部")},getEachDateTable:function(){var t=this;"全部"==this.firstNav&&(this.firstNav=null);var e=this.fastCheck.substring(0,2);s()({url:this._url2+"server/customer_management/email_analysis",method:"get",params:{platform:this.firstNav,country_code:this.twiceNav,site:this.threeNav,page:1,recent_date:e}}).then(function(e){console.log(e.data.data_list),t.tableData=e.data.data_list,t.$nextTick(function(){$(".mailOrderTable>tbody").scrollTop(0)}),t.total=e.data.data_count[0].count/5,t.page=1,document.querySelector(".beginDate").value="",document.querySelector(".endDate").value=""}),null==this.firstNav&&(this.firstNav="全部")},getEchartData:function(){var t=this.$refs.chart;if(t){var e=this.$echarts.init(t),a={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["邮件量","订单量","比率"]},xAxis:this.xAxis,yAxis:[{type:"value",name:"邮件量",min:0,max:1e3,interval:100,axisLabel:{formatter:"{value} "}},{type:"value",name:"比率",min:0,max:1,interval:.1,axisLabel:{formatter:"{value} "}}],series:this.series};e.setOption(a),window.addEventListener("resize",function(){e.resize()})}this.$on("hook:destoryed",function(){window.removeEventListener("resize",function(){myChart.resize()})})},handleCurrentChange:function(t){var e=this;console.log("换页"),"全部"==this.firstNav&&(this.firstNav=null),this.page=t;var a=document.querySelector(".beginDate").value,i=document.querySelector(".endDate").value;if(""!=a)s()({url:this._url2+"server/customer_management/email_analysis",method:"get",params:{platform:this.firstNav,country_code:this.twiceNav,site:this.threeNav,page:this.page,begin_date:a,over_date:i}}).then(function(t){console.log("打印"),e.tableData=t.data.data_list,e.$nextTick(function(){$(".mailOrderTable>tbody").scrollTop(0)}),e.total=t.data.data_count[0].count/5});else if(this.fastCheck){var n=this.fastCheck.substring(0,2);s()({url:this._url2+"server/customer_management/email_analysis",method:"get",params:{platform:this.firstNav,country_code:this.twiceNav,site:this.threeNav,page:this.page,recent_date:n}}).then(function(t){e.tableData=t.data.data_list,e.$nextTick(function(){$(".mailOrderTable>tbody").scrollTop(0)}),e.total=t.data.data_count[0].count/5})}else s()({url:this._url2+"server/customer_management/email_analysis",method:"get",params:{platform:this.firstNav,country_code:this.twiceNav,site:this.threeNav,page:this.page}}).then(function(t){e.tableData=t.data.data_list,e.$nextTick(function(){$(".mailOrderTable>tbody").scrollTop(0)}),e.total=t.data.data_count[0].count/5});null==this.firstNav&&(this.firstNav="全部")}},mounted:function(){window.addEventListener("scroll",this.handleScroll),this.getEchartData()},created:function(){var t=this;this.getDefaultData(),s()({url:this._url2+"server/personnel_management/area_sign2/",method:"get"}).then(function(e){t.leftNavData=e.data.data})}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-menu",{staticClass:"leftNav",attrs:{"unique-opened":""}},t._l(t.leftNavData,function(e,i){return a("el-submenu",{key:i,attrs:{index:i+""}},[a("template",{slot:"title"},[t._v(t._s(i))]),t._v(" "),t._l(e,function(e,s){return a("el-submenu",{key:s,attrs:{index:s+""}},[a("template",{slot:"title"},[t._v(t._s(s))]),t._v(" "),t._l(e,function(e,n){return a("el-menu-item",{key:n,attrs:{index:s+e},on:{click:function(a){return t.NavClick(i,s,e)}}},[t._v(t._s(e))])})],2)})],2)}),1),t._v(" "),a("div",{staticStyle:{"padding-top":"2vh","margin-left":"13vw",height:"92vh",overflow:"auto"}},[a("h2",{staticStyle:{color:"white"}},[t._v("\n      店铺："+t._s(t.firstNav)+"-"+t._s(t.twiceNav)+"-"+t._s(t.threeNav)+"\n    ")]),t._v(" "),a("div",{staticStyle:{color:"white","margin-top":"2vh"}},[t._v("\n      快捷搜索："),a("select",{directives:[{name:"model",rawName:"v-model",value:t.fastCheck,expression:"fastCheck"}],staticStyle:{width:"8vw",height:"2.5vh",outline:"none"},attrs:{name:"",id:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fastCheck=e.target.multiple?a:a[0]},t.getEachDateTable]}},[a("option",{attrs:{value:"15天内"}},[t._v("15天内")]),t._v(" "),a("option",{attrs:{value:"30天内"}},[t._v("30天内")]),t._v(" "),a("option",{attrs:{value:"60天内"}},[t._v("60天内")])]),t._v("\n      起始时间："),a("input",{staticClass:"beginDate",staticStyle:{color:"black"},attrs:{type:"date"},on:{change:function(e){return t.getDateTable()}}}),t._v("\n      结束时间："),a("input",{staticClass:"endDate",staticStyle:{color:"black"},attrs:{type:"date"},on:{change:function(e){return t.getDateTable()}}})]),t._v(" "),a("table",{staticClass:"mailOrderTable"},[t._m(0),t._v(" "),a("tbody",t._l(t.tableData,function(e,i){return a("tr",{key:i,staticStyle:{cursor:"pointer"},on:{click:function(a){return t.getChart(e.country,e.site,e.platform,e.sku)}}},[a("td",[t._v(t._s(i+1+50*(t.page-1)))]),t._v(" "),a("td",[t._v(t._s(e.site))]),t._v(" "),a("td",[t._v(t._s(e.platform))]),t._v(" "),a("td",[t._v(t._s(e.country))]),t._v(" "),a("td",[t._v(t._s(e.sku))]),t._v(" "),a("td",[t._v(t._s(e.email_num))]),t._v(" "),a("td",[t._v(t._s(e.sku_num))]),t._v(" "),a("td",{class:{trbackground:parseInt(e.email_num)/parseInt(e.sku_num)>.1}},[t._v("\n            "+t._s(isNaN((parseInt(e.email_num)/parseInt(e.sku_num)*100).toFixed(2))?0:(parseInt(e.email_num)/parseInt(e.sku_num)*100).toFixed(2))+"\n            %\n          ")]),t._v(" "),a("td",[t._v("10%")])])}),0)]),t._v(" "),a("el-pagination",{staticClass:"pagetotle",staticStyle:{margin:"1vh 0 0 25vw"},attrs:{background:"","current-page":t.page,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("div",{ref:"chart",staticStyle:{width:"57vw",height:"376px","padding-right":"5vw",margin:"3vh 0 0 14vw",background:"rgba(255, 255, 255, 0.9)"}})],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("站点")]),t._v(" "),a("th",[t._v("平台")]),t._v(" "),a("th",[t._v("国家")]),t._v(" "),a("th",[t._v("在售sku")]),t._v(" "),a("th",[t._v("邮件量")]),t._v(" "),a("th",[t._v("订单量")]),t._v(" "),a("th",[t._v("邮件/订单比率")]),t._v(" "),a("th",[t._v("邮件比率阈值")])])])}]};var l=a("VU/8")(n,r,!1,function(t){a("zDm6")},"data-v-48a85c8a",null);e.default=l.exports},zDm6:function(t,e){}});
//# sourceMappingURL=89.7314062242e7b74a8816.js.map