webpackJsonp([78],{QJpO:function(t,e){},jUsn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mtWM"),s=i.n(a),l={data:function(){return{fileListTSV:[],tableData:[],centerDialogVisible:!1,ditch:"",site:"",country:"",container:"",ditchList:[],siteList:[],countryList:[],searchList:[{container_num:"请搜索"}],searchNoList:[{container_num:"请搜索"}],tableList:{box_stuck:"",calculation_file_path:"",establish_warehouse:"",place_order:"",bar_code:""},fileData:[],file:"",flag:0,flag2:!1,flag3:!0,distributionVisible:!1,tableDataDetail:[]}},computed:{},methods:{showDistributionDetail:function(){var t=this;this.distributionVisible=!0;var e=this._url2+"server/stock_management/get_distribution_sku/";this.$axios.get(e,{params:{site:this.tableList.site,country:this.tableList.country,container_num:this.tableList.container_num,factory:this.tableList.factory}}).then(function(e){console.log(e),200==e.data.code&&(t.tableDataDetail=e.data.re_sku_data||[])})},handleRemoveTSV:function(t,e){console.log(t,e)},checkFileType:function(t){return/.+\.tsv$/g.test(t)},beforeTSVUpload:function(t,e){console.log("上传之前",t,e),this.fileListTSV=[],this.checkFileType(t.name)?(this.fileListTSV.push(t.raw),console.log(t),this.submitTSV()):alert("请上传后缀为TSV类型的文件！")},submitTSV:function(){var t=this;console.log("123");var e=new FormData;e.append("site",this.tableList.site),e.append("country",this.tableList.country),e.append("container_num",this.tableList.container_num),console.log(this.fileListTSV,this.fileListTSV[0]),e.append("files",this.fileListTSV[0]),this.$axios.post(this._url2+"server/stock_management/warehouse_script/",e).then(function(e){200==e.data.code&&(t.$message.success("文件上传成功！"),t.fileListTSV=[])})},onlyNum:function(t){return t.replace(/\D/g,"")},submit_SKU:function(){this.SelectFBM=!1,this.skuDialogVisible=!0},uploadFile:function(){},getDefaultData:function(){var t=this;s()({url:this._url2+"server/stock_management/operating_upload",method:"get"}).then(function(e){console.log(e),t.ditchList=e.data.re_list[1]}),s()({url:this._url2+"server/personnel_management/get_sign_country/",method:"get"}).then(function(e){for(var i=e.data.data,a=0;a<i.length;a++){var s={label:i[a],value:i[a]};t.countryList.push(s)}})},searchContainer:function(){var t=this;s()({url:this._url2+"server/stock_management/operating_upload",method:"get",params:{site:this.site,country:this.country,container:this.container,platform:this.ditch}}).then(function(e){console.log(e),t.searchList=e.data.re_data,t.searchNoList=e.data.re_no_data;for(var i=0;i<t.searchList.length;i++)t.searchList[i].place_order&&(-1==t.searchList[i].place_order.indexOf("@")?t.searchList[i].place_order=[t.searchList[i].place_order]:t.searchList[i].place_order=t.searchList[i].place_order.split("@")),t.searchList[i].calculation_file_path&&(-1==t.searchList[i].calculation_file_path.indexOf("@")?t.searchList[i].calculation_file_path=[t.searchList[i].calculation_file_path]:t.searchList[i].calculation_file_path=t.searchList[i].calculation_file_path.split("@")),t.searchList[i].establish_warehouse&&(-1==t.searchList[i].establish_warehouse.indexOf("@")?t.searchList[i].establish_warehouse=[t.searchList[i].establish_warehouse]:t.searchList[i].establish_warehouse=t.searchList[i].establish_warehouse.split("@")),t.searchList[i].box_stuck&&(-1==t.searchList[i].box_stuck.indexOf("@")?t.searchList[i].box_stuck=[t.searchList[i].box_stuck]:t.searchList[i].box_stuck=t.searchList[i].box_stuck.split("@")),t.searchList[i].bar_code&&(-1==t.searchList[i].bar_code.indexOf("@")?t.searchList[i].bar_code=[t.searchList[i].bar_code]:t.searchList[i].bar_code=t.searchList[i].bar_code.split("@")),t.searchList[i].bar_code_new&&(-1==t.searchList[i].bar_code_new.indexOf("@")?t.searchList[i].bar_code_new=[t.searchList[i].bar_code_new]:t.searchList[i].bar_code_new=t.searchList[i].bar_code_new.split("@"));for(var a=document.querySelector(".leftUl").querySelectorAll("li"),s=0;s<a.length;s++)a[s].style.background=""})},submitUploadFile:function(){var t=this;if(0===this.flag){for(var e=this.tableList.id,i=new FormData,a=0;a<this.fileData.length;a++)i.append("file_name",this.fileData[a]);i.append("site",this.tableList.site),i.append("country",this.tableList.country),i.append("platform",this.tableList.platform),i.append("container_num",this.tableList.container_num),i.append("id",this.tableList.id),this.$axios.post(this._url2+"server/stock_management/operating_upload",i).then(function(i){200==i.data.code?(alert("上传成功"),t.centerDialogVisible=!1,s()({url:t._url2+"server/stock_management/operating_upload",method:"get",params:{site:t.site,country:t.country,container:t.container,platform:t.ditch}}).then(function(i){t.searchList=i.data.re_data;for(var a=0;a<t.searchList.length;a++)t.searchList[a].place_order&&(-1==t.searchList[a].place_order.indexOf("@")?t.searchList[a].place_order=[t.searchList[a].place_order]:t.searchList[a].place_order=t.searchList[a].place_order.split("@")),t.searchList[a].calculation_file_path&&(-1==t.searchList[a].calculation_file_path.indexOf("@")?t.searchList[a].calculation_file_path=[t.searchList[a].calculation_file_path]:t.searchList[a].calculation_file_path=t.searchList[a].calculation_file_path.split("@")),t.searchList[a].establish_warehouse&&(-1==t.searchList[a].establish_warehouse.indexOf("@")?t.searchList[a].establish_warehouse=[t.searchList[a].establish_warehouse]:t.searchList[a].establish_warehouse=t.searchList[a].establish_warehouse.split("@")),t.searchList[a].box_stuck&&(-1==t.searchList[a].box_stuck.indexOf("@")?t.searchList[a].box_stuck=[t.searchList[a].box_stuck]:t.searchList[a].box_stuck=t.searchList[a].box_stuck.split("@")),t.searchList[a].bar_code&&(-1==t.searchList[a].bar_code.indexOf("@")?t.searchList[a].bar_code=[t.searchList[a].bar_code]:t.searchList[a].bar_code=t.searchList[a].bar_code.split("@")),t.searchList[a].bar_code_new&&(-1==t.searchList[a].bar_code_new.indexOf("@")?t.searchList[a].bar_code_new=[t.searchList[a].bar_code_new]:t.searchList[a].bar_code_new=t.searchList[a].bar_code_new.split("@"));for(var s=0;s<t.searchList.length;s++)e==t.searchList[s].id&&(t.tableList=t.searchList[s]),t.fileData=[],t.file="",t.$refs.upload.clearFiles()})):400==i.data.code&&t.$message({showClose:!0,message:i.data.msg,type:"error"})})}else alert("文件格式错误重新上传"),this.flag=0,this.centerDialogVisible=!1},close:function(){this.fileData=[],this.file="",this.$refs.upload.clearFiles(),this.flag=0},handleRemove:function(t){for(var e in this.fileData)this.fileData[e]===t.raw&&this.fileData.splice(e,1)},showDetail:function(t,e){this.SelectFBM=!0,this.skuDialogVisible=!1,document.querySelector(".hidTable").style.visibility="visible";for(var i=document.querySelectorAll(".containerLi"),a=0;a<i.length;a++)i[a].style.background="";i[e].style.background="skyblue";for(var s=0;s<this.searchList.length;s++)t==this.searchList[s].id&&(this.tableList=this.searchList[s],console.log(this.tableList))},getfilename:function(t){if(t){var e=t.lastIndexOf("/");return t.substring(e+1)}},beforeUpload:function(t){var e=this.tableList.container_num;console.log(t.name);var i=this.tableList.factory;-1==t.name.indexOf(e)||-1==t.name.indexOf(i)?(this.flag++,alert("上传文件名字错误，请关闭弹框后重新上传,")):(this.fileData.push(t),this.file=t)},getFileUrl:function(t){if(t){var e=t.lastIndexOf("/");return t.substring(0,e+1)}},findPosition:function(t,e,i){if(t){for(var a=t.indexOf(e),s=0;s<i;s++)a=t.indexOf(e,a+1);return a}},returnnum:function(t){if(t){console.log(t);var e=this.findPosition(t,"-",2),i=t.indexOf("-");return console.log(t.substring(i+1,e)),t.substring(i+1,e)}},close_specification:function(){document.querySelector(".specification").style.display="none"},open_specification:function(){document.querySelector(".specification").style.display="block"}},created:function(){this.getDefaultData(),this.searchContainer()},watch:{searchList:function(){this.searchList.length>=1?this.flag2=!1:this.flag2=!0},country:function(){var t=this;this.site="",s()({url:this._url2+"server/personnel_management/get_sign_area/",method:"get",params:{country:this.country}}).then(function(e){t.siteList=[];for(var i=e.data.data,a=0;a<i.length;a++){var s={value:i[a],label:i[a]};t.siteList.push(s)}})}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"bigbox"}},[i("div",{staticClass:"specification"},[i("h1",[t._v("运营资料下载")]),t._v(" "),i("h4",[t._v("上传文件名格式说明书")]),t._v(" "),i("div",{staticClass:"line3"}),t._v(" "),i("p",{staticStyle:{padding:"0 2vw"}},[t._v("\n      上传文件名必须含有工厂和货柜号。（例如合迪工厂\n      D999的文件必须包含合迪和D99）否则上传失败、失败后请关闭上传口重新打开。\n    ")]),t._v(" "),i("div",{staticClass:"cicle1"},[i("div",{staticClass:"cicle2",on:{click:function(e){return t.close_specification()}}},[i("div",{staticClass:"line1"}),t._v(" "),i("div",{staticClass:"line2"})])])]),t._v(" "),i("div",{staticClass:"leftDiv"},[i("h3",{},[t._v("待处理货柜信息")]),t._v(" "),i("div",[t._v("\n      渠道\n      "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.ditch,callback:function(e){t.ditch=e},expression:"ditch"}},t._l(t.ditchList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("div",[t._v("\n      国家\n      "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}},t._l(t.countryList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("div",[t._v("\n      站点\n      "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},t._l(t.siteList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("div",[t._v("\n      货柜号搜索\n      "),i("el-input",{staticStyle:{width:"8vw"},attrs:{placeholder:"请输入内容"},model:{value:t.container,callback:function(e){t.container=e},expression:"container"}})],1),t._v(" "),i("div",[i("el-button",{staticStyle:{width:"8vw","margin-left":"2vw"},attrs:{type:"primary"},on:{click:function(e){return t.searchContainer()}}},[t._v("搜 索")]),t._v(" "),i("br"),t._v(" "),i("el-button",{staticStyle:{width:"4vw","margin-left":"1.5vw","margin-top":"0.5vh","text-align":"center"},attrs:{type:t.flag3?"warning":"info"},on:{click:function(e){t.flag3=!0}}},[t._v("已回传")]),t._v(" "),i("el-button",{staticStyle:{width:"4vw","text-align":"center"},attrs:{type:t.flag3?"info":"warning"},on:{click:function(e){t.flag3=!1}}},[t._v("未回传")])],1),t._v(" "),i("div",{staticClass:"UlDive"},[t.flag3?i("ul",{staticClass:"leftUl"},[t._l(t.searchList,function(e,a){return i("li",{key:a,staticClass:"containerLi",on:{click:function(i){return t.showDetail(e.id,a)}}},[t._v("\n          "+t._s(e.container_num)+"-"+t._s(e.factory)+"\n        ")])}),t._v(" "),0==t.searchList.length?i("li",[t._v("没有找到符合条件货柜号")]):t._e()],2):t._e(),t._v(" "),t.flag3?t._e():i("ul",{staticClass:"noUl"},[t._l(t.searchNoList,function(e,a){return i("li",{key:a},[t._v("\n          "+t._s(e.container_num)+"\n        ")])}),t._v(" "),0==t.searchNoList.length?i("li",[t._v("没有找到符合条件货柜号")]):t._e()],2)])]),t._v(" "),i("div",{staticClass:"hidTable",staticStyle:{flex:"7","padding-left":"2vw","margin-left":"1vw"}},[i("h3",{staticStyle:{color:"white"}},[i("a",{staticClass:"open_specification",attrs:{href:"javascript:;"},on:{click:function(e){return t.open_specification()}}},[t._v("文件名说明书")]),t._v("\n      "+t._s(t.tableList.site)+t._s(t.tableList.country)+"-"+t._s(t.returnnum(t.tableList.calculation_file_path[0]))+"-"+t._s(t.tableList.container_num)+"-"+t._s(t.tableList.factory)+"\n      资料上传\n    ")]),t._v(" "),i("table",[t._m(0),t._v(" "),i("tbody",[i("tr",[i("td",[t._v("测算表")]),t._v(" "),i("td",t._l(t.tableList.calculation_file_path,function(e,a){return i("div",{key:a},[i("a",{attrs:{href:"https://www.beyoung.group/file_download/?path="+t.getFileUrl(e)+"&filename="+t.getfilename(e),download:""}},[t._v(t._s(t.getfilename(e)))])])}),0),t._v(" "),i("td",[t._v(t._s(t.tableList.calculation_file_date))]),t._v(" "),i("td",[t._v(t._s(t.tableList.calculation_file_state))])]),t._v(" "),i("tr",[i("td",[t._v("下单表")]),t._v(" "),i("td",t._l(t.tableList.place_order,function(e,a){return i("div",{key:a},[i("a",{attrs:{href:"https://www.beyoung.group/file_download/?path="+t.getFileUrl(e)+"&filename="+t.getfilename(e),download:""}},[t._v(t._s(t.getfilename(e)))])])}),0),t._v(" "),i("td",[t._v(t._s(t.tableList.place_order_date))]),t._v(" "),i("td",[t._v(t._s(t.tableList.place_order_state))])]),t._v(" "),i("tr",[i("td",[t._v("建仓信息确认表")]),t._v(" "),i("td",t._l(t.tableList.establish_warehouse,function(e,a){return i("div",{key:a},[i("a",{attrs:{href:"https://www.beyoung.group/file_download/?path="+t.getFileUrl(e)+"&filename="+t.getfilename(e),download:""}},[t._v(t._s(t.getfilename(e)))])])}),0),t._v(" "),i("td",[t._v(t._s(t.tableList.establish_warehouse_date))]),t._v(" "),i("td",[t._v(t._s(t.tableList.establish_warehouse_state))])]),t._v(" "),i("tr",[i("td",[t._v("\n            箱贴\n            "),i("el-tooltip",{attrs:{placement:"top",effect:"light"}},[i("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                箱贴命名方式：站点国家-xxxx-上传人-日期-货柜号-FBA/FBM-工厂-箱贴"),i("br"),t._v("\n                举例：中睿英国-2149-罗秋丽-0114-D568-FBM-合迪-箱贴\n              ")]),t._v(" "),i("span",{staticClass:"detail"},[t._v("?"),i("i")])])],1),t._v(" "),i("td",t._l(t.tableList.box_stuck,function(e,a){return i("div",{key:a},[i("a",{attrs:{href:"https://www.beyoung.group/file_download/?path="+t.getFileUrl(e)+"&filename="+t.getfilename(e),download:""}},[t._v(t._s(t.getfilename(e)))])])}),0),t._v(" "),i("td",[t._v(t._s(t.tableList.box_stuck_date))]),t._v(" "),i("td",[t._v(t._s(t.tableList.box_stuck_state))])]),t._v(" "),i("tr",[i("td",[t._v("亚马逊条码")]),t._v(" "),i("td",t._l(t.tableList.bar_code,function(e,a){return i("div",{key:a},[i("a",{attrs:{href:"https://www.beyoung.group/file_download/?path="+t.getFileUrl(e)+"&filename="+t.getfilename(e),download:""}},[t._v(t._s(t.getfilename(e)))])])}),0),t._v(" "),i("td",[t._v(t._s(t.tableList.bar_code_date))]),t._v(" "),i("td",[t._v(t._s(t.tableList.bar_code_state))])]),t._v(" "),i("tr",[i("td",[t._v("海外仓条码")]),t._v(" "),i("td",t._l(t.tableList.bar_code_new,function(e,a){return i("div",{key:a},[i("a",{attrs:{href:"https://www.beyoung.group/file_download/?path="+t.getFileUrl(e)+"&filename="+t.getfilename(e),download:""}},[t._v(t._s(t.getfilename(e)))])])}),0),t._v(" "),i("td",[t._v(t._s(t.tableList.bar_code_date_new))]),t._v(" "),i("td",[t._v(t._s(t.tableList.bar_code_state_new))])])])]),t._v(" "),i("div",{staticClass:"BottomGroupBtn"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.showDistributionDetail}},[t._v("\n        查看订单分配情况\n      ")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.centerDialogVisible=!0}}},[t._v("上 传 资 料")]),t._v(" "),i("el-upload",{ref:"TSVUpload",staticClass:"upload-demo",attrs:{action:"123","http-request":t.submitTSV,"on-change":t.beforeTSVUpload,"on-remove":t.handleRemoveTSV,limit:1,accept:"text/tab-separated-values","file-list":t.fileListTSV,"auto-upload":!1}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("建仓信息TSV上传")])],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"运营资料上传",visible:t.centerDialogVisible,"close-on-click-modal":!1,width:"410px",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e},close:t.close}},[i("span",[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"123",multiple:"","before-upload":t.beforeUpload,"http-request":t.uploadFile,"on-remove":t.handleRemove}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("\n          将文件拖到此处，或\n          "),i("em",[t._v("点击上传")])])])],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUploadFile()}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"订单分配情况",visible:t.distributionVisible,width:"441px"},on:{"update:visible":function(e){t.distributionVisible=e},close:function(e){t.distributionVisible=!1}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":"400px",border:"","highlight-current-row":"",data:t.tableDataDetail}},[i("el-table-column",{attrs:{align:"center",width:"300px",label:"分配sku",prop:"sku"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",width:"100px",label:"数量",prop:"plan_order"}})],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("资料类型")]),this._v(" "),e("th",[this._v("运营资料")]),this._v(" "),e("th",[this._v("最新修改日期")]),this._v(" "),e("th",[this._v("审核状态")])])])}]};var r=i("VU/8")(l,n,!1,function(t){i("QJpO")},"data-v-7ad1944a",null);e.default=r.exports}});
//# sourceMappingURL=78.7be15e19e643e0d9ca70.js.map