webpackJsonp([23],{HMoo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("BO1k"),i=a.n(o),n={name:"",props:{},components:{},data:function(){return{queryForm:{checkedType:"",checkedSite:"",checkedCountry:"",checkedSku:"",page:1,isQuery:!1},barCodeList:[],leftBarCodeList:[],productTypeList:["Amazon"],siteList:[],countryList:[],skuList:[],selectNum:0,selection:[],fileData:[],file:"",isShowSort:!1,examineVisible:!1,checkCodeList:[],examineSelectNum:0,examineSelection:[],currentPage:1,total:0,pageSize:50}},computed:{},watch:{},methods:{getIndex:function(e){return e+1+50*(this.currentPage-1)},getCodeList:function(){var e=this;this.skuList=[],this.$api.codeQueryInfo(this.queryForm).then(function(t){console.log(t),e.barCodeList=t.data.data,e.skuList=t.data.sku_list,e.total=t.data.all_number,e.currentPage=1})},initCountry:function(e){for(var t in this.countryList=[],e){var a=e[t];"西班牙"!==a&&"意大利"!==a&&"法国"!==a&&"英国"!==a&&"德国"!==a?this.countryList.push(a):this.flag=!0}this.flag&&this.countryList.push("欧洲")},getCountryList:function(){var e=this;this.$api.getCountryList().then(function(t){console.log(t);var a=t.data.data;e.initCountry(a)})},countryChange:function(e){var t=this;this.$api.getSiteList(e).then(function(e){console.log(e),t.siteList=e.data.data})},getCodeSelectList:function(){var e=this;this.$api.getCodeSelectList().then(function(t){console.log(t),e.leftBarCodeList=t.data.data})},handleSelectionChange:function(e){this.selectNum=e.length,this.selection=e,console.log(e)},removeBarCode:function(){var e=this;if(0==this.selectNum)return this.$message.closeAll(),this.$message.info("请选择条码");var t=[],a=!0,o=!1,n=void 0;try{for(var l,r=i()(this.selection);!(a=(l=r.next()).done);a=!0){var s=l.value;t.push(s[3])}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}console.log(t),this.$confirm("此操作将永久删除条码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.deleteCode(t).then(function(t){console.log(t),e.getCodeList(),e.$message.success("删除成功")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},beforeUpload:function(e){console.log(e),this.fileData.push(e),this.file=e},uploadFile:function(e){},uploadSubmit:function(){var e=this;if(0==this.fileData.length)return this.$message.error("请上传至少一个文件");var t=new FormData,a=!0,o=!1,n=void 0;try{for(var l,r=i()(this.fileData);!(a=(l=r.next()).done);a=!0){var s=l.value;t.append("files",s)}}catch(e){o=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(o)throw n}}this.$api.upload(t).then(function(t){e.getCodeList(),e.$message.success("上传成功"),e.$refs.upload.clearFiles(),e.file="",e.fileData=[]})},handleRemove:function(e){for(var t in this.fileData)this.fileData[t]===e.raw&&this.fileData.splice(t,1)},clearQuery:function(){var e=this;for(var t in this.queryForm)this.queryForm[t]="";this.queryForm.page=1,this.$api.codeQueryInfo(this.queryForm).then(function(t){console.log(t),e.barCodeList=t.data.data,e.total=t.data.all_number,e.currentPage=1,e.queryForm.isQuery=!1})},queryInfo:function(){var e=this;this.queryForm.page=1,this.$api.codeQueryInfo(this.queryForm).then(function(t){console.log(t),e.barCodeList=t.data.data,e.$nextTick(function(){e.$refs.codeTableRef.bodyWrapper.scrollTop=0}),e.total=t.data.all_number,e.currentPage=1,e.isShowSort=!0,e.queryForm.isQuery=!0})},getNoExamimeList:function(){var e=this;this.$api.getNoExamimeList().then(function(t){console.log(t),e.checkCodeList=t.data.data})},examine:function(){this.examineVisible=!0,this.getNoExamimeList()},examineClose:function(){this.examineSelection=[],this.examineSelectNum=0},examineConfirm:function(e){var t=this;if(0==this.examineSelection.length)return this.$message.error("请至少选择一个条码");var a=[],o=!0,n=!1,l=void 0;try{for(var r,s=i()(this.examineSelection);!(o=(r=s.next()).done);o=!0){var c=r.value;a.push(c[0])}}catch(e){n=!0,l=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw l}}this.$api.examineCode(a,e).then(function(e){console.log(e),t.$message.success("审核成功"),t.getCodeList(),t.examineVisible=!1})},examineSelectionChange:function(e){this.examineSelectNum=e.length,this.examineSelection=e,console.log(e)},examineRowClick:function(e){console.log(e),this.$refs.examineTableRef.toggleRowSelection(e)},colRowClick:function(e){this.$refs.codeTableRef.toggleRowSelection(e)},leftBarCodeClick:function(e){var t=this,a={barcode_id:e};this.$api.codeQueryInfo(a).then(function(e){console.log(e),t.barCodeList=e.data.data,t.total=e.data.all_number,t.currentPage=1,t.isShowSort=!0})},handleCurrentChange:function(e){var t=this;if(console.log(e),0==this.queryForm.isQuery){var a={checkedType:"",checkedSite:"",checkedCountry:"",checkedSku:"",page:e,isQuery:!1};this.$api.codeQueryInfo(a).then(function(e){console.log(e),t.barCodeList=e.data.data,t.total=e.data.all_number,t.$nextTick(function(){t.$refs.codeTableRef.bodyWrapper.scrollTop=0})})}else this.queryForm.page=e,this.$api.codeQueryInfo(this.queryForm).then(function(e){console.log(e),t.barCodeList=e.data.data,t.total=e.data.all_number,t.$nextTick(function(){t.$refs.codeTableRef.bodyWrapper.scrollTop=0})})},exportData:function(){this.$api.exportData().then(function(e){console.log(e);var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.style.display="none",a.target="_blank",a.setAttribute("download","未有条码文件数据.xlsx"),document.body.appendChild(a),a.click()})}},created:function(){this.getCodeList(),this.getCodeSelectList(),this.getCountryList()},mounted:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"pro-bar-code"}},[a("div",{staticClass:"left"},[e._m(0),e._v(" "),a("div",{staticClass:"left-content"},[a("h3",[e._v("条码上传")]),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"123",multiple:"","before-upload":e.beforeUpload,"http-request":e.uploadFile,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n          将文件拖到此处，或\n          "),a("em",[e._v("点击上传")])])]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.uploadSubmit}},[e._v("提交")])],1)]),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"info",staticStyle:{"font-size":"16px"}},[e.isShowSort?a("div",[""!=e.queryForm.checkedType?a("span",[e._v("渠道："+e._s(e.queryForm.checkedType))]):a("span",[e._v("渠道：全部")]),e._v(" "),""!=e.queryForm.checkedCountry?a("span",[e._v("国家："+e._s(e.queryForm.checkedCountry))]):a("span",[e._v("国家：全部")]),e._v(" "),""!=e.queryForm.checkedSite?a("span",[e._v("站点："+e._s(e.queryForm.checkedSite))]):a("span",[e._v("站点：全部")])]):a("div",[a("span",[e._v("渠道：全部")]),e._v(" "),a("span",[e._v("国家：全部")]),e._v(" "),a("span",[e._v("站点：全部")])])]),e._v(" "),a("div",{staticClass:"query"},[a("el-form",{ref:"queryRef",attrs:{model:e.queryForm,"label-width":"40px"}},[a("el-form-item",{attrs:{label:"渠道"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.queryForm.checkedType,callback:function(t){e.$set(e.queryForm,"checkedType",t)},expression:"queryForm.checkedType"}},e._l(e.productTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"国家"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:e.countryChange},model:{value:e.queryForm.checkedCountry,callback:function(t){e.$set(e.queryForm,"checkedCountry",t)},expression:"queryForm.checkedCountry"}},e._l(e.countryList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"站点"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.queryForm.checkedSite,callback:function(t){e.$set(e.queryForm,"checkedSite",t)},expression:"queryForm.checkedSite"}},e._l(e.siteList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"sku"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.queryForm.checkedSku,callback:function(t){e.$set(e.queryForm,"checkedSku",t)},expression:"queryForm.checkedSku"}},e._l(e.skuList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.queryInfo}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.clearQuery}},[e._v("清空查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.examine}},[e._v("条码审核")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.removeBarCode}},[e._v("删除条码")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportData}},[e._v("待上传条码数据 一键导出")])],1),e._v(" "),a("div",{staticClass:"table",staticStyle:{"text-align":"center"}},[a("el-table",{ref:"codeTableRef",staticStyle:{width:"80%"},attrs:{data:e.barCodeList,border:"","max-height":"500"},on:{"selection-change":e.handleSelectionChange,"row-click":e.colRowClick}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.getIndex,label:"序号",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"6",label:"FNSKU",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"pointer",attrs:{href:"https://www.beyoung.group/tm_data_download/?filename="+t.row[5],target:"_blank"}},[e._v(e._s(t.row[6]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"4",label:"品名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"3",label:"sku"}}),e._v(" "),a("el-table-column",{attrs:{prop:"0",label:"渠道",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"1",label:"站点",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"2",label:"国家",width:"70"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"审核",visible:e.examineVisible,width:"80%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.examineVisible=t},close:e.examineClose}},[e.checkCodeList.length>0?a("div",[a("el-table",{ref:"examineTableRef",staticStyle:{width:"96%"},attrs:{border:"",data:e.checkCodeList,"max-height":"550"},on:{"selection-change":e.examineSelectionChange,"row-click":e.examineRowClick}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"1",label:"产品类别",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"2",label:"渠道",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"3",label:"站点",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"4",label:"国家",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"5",label:"sku",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"6",label:"品名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"7",label:"商品条码",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return["新增待审核"==t.row[9]?a("a",{staticClass:"pointer",attrs:{href:e._urlzgl+t.row[7],download:""}},[e._v(e._s(t.row[7].slice(t.row[7].lastIndexOf("/")+1)))]):a("a",{staticClass:"pointer",attrs:{href:"https://www.beyoung.group/tm_data_download/?filename="+t.row[7]+".btw",download:""}},[e._v(e._s(t.row[7].slice(t.row[7].lastIndexOf("/")+1)))])]}}],null,!1,355544340)}),e._v(" "),a("el-table-column",{attrs:{prop:"8",label:"FNSKU",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"9",label:"审核状态",width:"100"}})],1)],1):a("div",{staticStyle:{"text-align":"center"}},[a("span",[e._v("暂无需要审核的条码")])]),e._v(" "),e.checkCodeList.length>0?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.examineConfirm("审核不通过")}}},[e._v("审核不通过")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.examineConfirm("审核通过")}}},[e._v("审核通过")])],1):e._e()])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h2",{staticStyle:{"text-align":"center"}},[this._v("产品条码")])])}]};var r=a("VU/8")(n,l,!1,function(e){a("nYwH"),a("NxmN")},"data-v-f88cb430",null);t.default=r.exports},NxmN:function(e,t){},nYwH:function(e,t){}});
//# sourceMappingURL=23.501cbffc8b3dfdfe314e.js.map