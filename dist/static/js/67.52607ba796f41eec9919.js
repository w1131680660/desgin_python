webpackJsonp([67],{"8k3L":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t("BO1k"),a=t.n(r),i={name:"",props:{},data:function(){return{personnelData:[],editDialog:{editPersonVisible:!1,editPersonForm:{}},addDialog:{addPersonVisible:!1,addPersonForm:{personnel_id:"",user_name:"",department:"物流部",position:"",phone:"",entry_date:"",work:""}},position:[{value:"总监",label:"总监"},{value:"主管",label:"主管"},{value:"专员",label:"专员"}],formRules:{personnel_id:[{required:!0,message:"请输入人员编码",trigger:"blur"}],user_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],department:[{required:!0,message:"请输入部门名称",trigger:"blur"}],position:[{required:!0,message:"请输入职位名称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,o,t){if(/^[1][3,4,5,7,8][0-9]{9}$/.test(o))return t();t("请输入正确的手机号码")},trigger:"blur"}],entry_date:[{required:!0,message:"请输入入职日期",trigger:"change"}],work:[{required:!0,message:"请输入具体业务",trigger:"blur"}]}}},computed:{},watch:{},methods:{getPersonList:function(){var e=this;this.$api2.getPersonList().then(function(o){e.personnelData=o.data.data})},editPerson:function(e){console.log(e);var o=!0,t=!1,r=void 0;try{for(var i,n=a()(this.personnelData);!(o=(i=n.next()).done);o=!0){var d=i.value;d.personnel_id==e&&(this.editDialog.editPersonForm=this.$utils.deepClone(d))}}catch(e){t=!0,r=e}finally{try{!o&&n.return&&n.return()}finally{if(t)throw r}}this.editDialog.editPersonVisible=!0},addPerson:function(){this.addDialog.addPersonVisible=!0},removePerson:function(e){var o=this;this.$confirm("此操作将永久删除该员工, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$api2.removePerson(e).then(function(e){console.log(e.data.data),o.getPersonList(),o.$message({type:"success",message:"删除成功!"})})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},editDialogClose:function(){this.$refs.editPersonRef.resetFields()},addDialogClose:function(){this.$refs.addPersonRef.resetFields()},editPersonClick:function(){var e=this;this.$refs.editPersonRef.validate(function(o){if(o){var t=new FormData;t.append("personnel_id",e.editDialog.editPersonForm.personnel_id),t.append("user_name",e.editDialog.editPersonForm.user_name),t.append("department",e.editDialog.editPersonForm.department),t.append("position",e.editDialog.editPersonForm.position),t.append("phone",e.editDialog.editPersonForm.phone),t.append("entry_date",e.editDialog.editPersonForm.entry_date),t.append("work",e.editDialog.editPersonForm.work),e.$api2.editPerson(t).then(function(o){console.log(o.data),e.getPersonList(),e.$message.success("编辑员工成功!"),e.editDialog.editPersonVisible=!1})}})},addPersonConfirm:function(){var e=this;this.$refs.addPersonRef.validate(function(o){if(!o)return!1;var t=new FormData;t.append("personnel_id",e.addDialog.addPersonForm.personnel_id),t.append("user_name",e.addDialog.addPersonForm.user_name),t.append("department",e.addDialog.addPersonForm.department),t.append("position",e.addDialog.addPersonForm.position),t.append("phone",e.addDialog.addPersonForm.phone),t.append("entry_date",e.addDialog.addPersonForm.entry_date),t.append("work",e.addDialog.addPersonForm.work),e.$api2.addPersonInfo(t).then(function(o){console.log(o.data),e.getPersonList(),e.$message.success("添加员工成功!"),e.addDialog.addPersonVisible=!1})})}},created:function(){var e=this;this.$axios({url:this._url2+"server/stock_management/is_open/",method:"get"}).then(function(o){200==o.data.code?e.getPersonList():(alert("你没有权限进入这个页面"),e.$router.push("/Login"))})},mounted:function(){}},n={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("div",{staticClass:"table"},[t("el-button",{staticClass:"add_button",attrs:{type:"primary",size:"mini"},on:{click:e.addPerson}},[e._v("新增")]),e._v(" "),t("table",[e._m(0),e._v(" "),t("tbody",e._l(e.personnelData,function(o,r){return t("tr",{key:r},[t("td",[e._v(e._s(r+1))]),e._v(" "),t("td",[e._v(e._s(o.personnel_id))]),e._v(" "),t("td",[e._v(e._s(o.user_name))]),e._v(" "),t("td",[e._v(e._s(o.department))]),e._v(" "),t("td",[e._v(e._s(o.position))]),e._v(" "),t("td",[e._v(e._s(o.entry_date))]),e._v(" "),t("td",[e._v(e._s(o.phone))]),e._v(" "),t("td",[e._v(e._s(o.work))]),e._v(" "),t("td",[e._v("---")]),e._v(" "),t("td",{staticStyle:{width:"180px"}},[t("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.editPerson(o.personnel_id)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.removePerson(o.personnel_id)}}},[e._v("删除")])],1)])}),0)])],1),e._v(" "),t("el-dialog",{attrs:{title:"编辑员工信息",visible:e.editDialog.editPersonVisible,width:"50%",center:""},on:{"update:visible":function(o){return e.$set(e.editDialog,"editPersonVisible",o)},close:e.editDialogClose}},[t("el-form",{ref:"editPersonRef",attrs:{model:e.editDialog.editPersonForm,"label-width":"170px",rules:e.formRules}},[t("el-form-item",{attrs:{label:"人员编码",prop:"personnel_id"}},[t("el-input",{model:{value:e.editDialog.editPersonForm.personnel_id,callback:function(o){e.$set(e.editDialog.editPersonForm,"personnel_id",o)},expression:"editDialog.editPersonForm.personnel_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名",prop:"user_name"}},[t("el-input",{model:{value:e.editDialog.editPersonForm.user_name,callback:function(o){e.$set(e.editDialog.editPersonForm,"user_name",o)},expression:"editDialog.editPersonForm.user_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"部门",prop:"department"}},[t("el-input",{attrs:{readonly:"readonly"},model:{value:e.editDialog.editPersonForm.department,callback:function(o){e.$set(e.editDialog.editPersonForm,"department",o)},expression:"editDialog.editPersonForm.department"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"职位",prop:"position"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editDialog.editPersonForm.position,callback:function(o){e.$set(e.editDialog.editPersonForm,"position",o)},expression:"editDialog.editPersonForm.position"}},e._l(e.position,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{model:{value:e.editDialog.editPersonForm.phone,callback:function(o){e.$set(e.editDialog.editPersonForm,"phone",o)},expression:"editDialog.editPersonForm.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"入职日期",prop:"entry_date"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editDialog.editPersonForm.entry_date,callback:function(o){e.$set(e.editDialog.editPersonForm,"entry_date",o)},expression:"editDialog.editPersonForm.entry_date"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"具体负责业务",prop:"work"}},[t("el-input",{model:{value:e.editDialog.editPersonForm.work,callback:function(o){e.$set(e.editDialog.editPersonForm,"work",o)},expression:"editDialog.editPersonForm.work"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.editDialog.editPersonVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.editPersonClick}},[e._v("保 存")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"新增员工",visible:e.addDialog.addPersonVisible,width:"30%",center:""},on:{"update:visible":function(o){return e.$set(e.addDialog,"addPersonVisible",o)},close:e.addDialogClose}},[t("el-form",{ref:"addPersonRef",attrs:{model:e.addDialog.addPersonForm,"label-width":"170px",rules:e.formRules}},[t("el-form-item",{attrs:{label:"人员编码",prop:"personnel_id"}},[t("el-input",{model:{value:e.addDialog.addPersonForm.personnel_id,callback:function(o){e.$set(e.addDialog.addPersonForm,"personnel_id",o)},expression:"addDialog.addPersonForm.personnel_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名",prop:"user_name"}},[t("el-input",{model:{value:e.addDialog.addPersonForm.user_name,callback:function(o){e.$set(e.addDialog.addPersonForm,"user_name",o)},expression:"addDialog.addPersonForm.user_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"部门",prop:"department"}},[t("el-input",{attrs:{readonly:"readonly"},model:{value:e.addDialog.addPersonForm.department,callback:function(o){e.$set(e.addDialog.addPersonForm,"department",o)},expression:"addDialog.addPersonForm.department"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"职位",prop:"position"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addDialog.addPersonForm.position,callback:function(o){e.$set(e.addDialog.addPersonForm,"position",o)},expression:"addDialog.addPersonForm.position"}},e._l(e.position,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{model:{value:e.addDialog.addPersonForm.phone,callback:function(o){e.$set(e.addDialog.addPersonForm,"phone",o)},expression:"addDialog.addPersonForm.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"入职日期",prop:"entry_date"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy/MM/dd","value-format":"yyyy/MM/dd"},model:{value:e.addDialog.addPersonForm.entry_date,callback:function(o){e.$set(e.addDialog.addPersonForm,"entry_date",o)},expression:"addDialog.addPersonForm.entry_date"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"具体负责业务",prop:"work"}},[t("el-input",{model:{value:e.addDialog.addPersonForm.work,callback:function(o){e.$set(e.addDialog.addPersonForm,"work",o)},expression:"addDialog.addPersonForm.work"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.addDialog.addPersonVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.addPersonConfirm}},[e._v("新 增")])],1)],1)],1)},staticRenderFns:[function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("thead",[t("tr",[t("th",[e._v("序号")]),e._v(" "),t("th",[e._v("人员编码")]),e._v(" "),t("th",[e._v("姓名")]),e._v(" "),t("th",[e._v("部门")]),e._v(" "),t("th",[e._v("职位")]),e._v(" "),t("th",[e._v("入职日期")]),e._v(" "),t("th",[e._v("手机号码")]),e._v(" "),t("th",[e._v("具体负责业务")]),e._v(" "),t("th",[e._v("账号类型")]),e._v(" "),t("th",{staticStyle:{width:"180px"}},[e._v("操作")])])])}]};var d=t("VU/8")(i,n,!1,function(e){t("cfD8")},"data-v-d36bb03a",null);o.default=d.exports},cfD8:function(e,o){}});
//# sourceMappingURL=67.52607ba796f41eec9919.js.map